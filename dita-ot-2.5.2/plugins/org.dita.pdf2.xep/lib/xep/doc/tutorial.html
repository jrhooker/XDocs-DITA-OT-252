
<!DOCTYPE html
  PUBLIC "HTML">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
      <title>XSL Formatting Objects Tutorial</title>
      <link rel="stylesheet" href=".css/topic.css" type="text/css">
      <link rel="stylesheet" href=".css/style.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="article" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title"><a name="d0e1"></a>XSL Formatting Objects Tutorial
                  </h2>
               </div>
               <div>
                  <div class="author">
                     <h3 class="author"><span class="firstname">Nikolai</span> <span class="surname">Grigoriev</span></h3>
                  </div>
               </div>
               <div>
                  <p class="copyright">Copyright &copy; 2001&#8211;2003 RenderX Inc.</p>
               </div>
            </div>
            <hr>
         </div>
         <div class="toc">
            <div class="toctopic">
               <p>This section contains the following topics:</p>
            </div>
            <dl>
               <dt id="s#Introduction" class="topic"><a id="a#Introduction" href="#Introduction" class="clear">Introduction</a></dt>
               <dt id="s#Hello_World" class="topic"><a id="a#Hello_World" href="#Hello_World" class="clear">&#8220;Hello, World!&#8221;</a></dt>
               <dt id="s#Font_Attributes" class="topic"><a id="a#Font_Attributes" href="#Font_Attributes" class="clear">Font and Text Attributes</a></dt>
               <dt><a id="a#Blocks" class="clear" href="#Blocks">Blocks</a></dt>
               <dd>
                  <dl>
                     <dt id="s#Text_Alignment" class="topic"><a id="a#Text_Alignment" href="#Text_Alignment" class="clear">Text Alignment, Line Height</a></dt>
                     <dt id="s#Borders" class="topic"><a id="a#Borders" href="#Borders" class="clear">Borders, Padding, and Background</a></dt>
                  </dl>
               </dd>
               <dt><a id="a#Page_Layout" class="clear" href="#Page_Layout">Page Layout</a></dt>
               <dd>
                  <dl>
                     <dt id="s#Page_Masters" class="topic"><a id="a#Page_Masters" href="#Page_Masters" class="clear">Page Sequence Masters</a></dt>
                     <dt id="s#Areas" class="topic"><a id="a#Areas" href="#Areas" class="clear">Areas, Flows, Static Contents</a></dt>
                  </dl>
               </dd>
               <dt><a id="a#Complex_Structures" class="clear" href="#Complex_Structures">More Complex Structures</a></dt>
               <dd>
                  <dl>
                     <dt id="s#Lists" class="topic"><a id="a#Lists" href="#Lists" class="clear">Lists</a></dt>
                     <dt id="s#Tables" class="topic"><a id="a#Tables" href="#Tables" class="clear">Tables</a></dt>
                  </dl>
               </dd>
               <dt id="s#Graphics" class="topic"><a id="a#Graphics" href="#Graphics" class="clear">Graphics</a></dt>
               <dt><a id="a#Advanced" class="clear" href="#Advanced">Advanced Features</a></dt>
               <dd>
                  <dl>
                     <dt id="s#Containers" class="topic"><a id="a#Containers" href="#Containers" class="clear">Containers and Reference Orientation</a></dt>
                     <dt id="s#Writing_Mode" class="topic"><a id="a#Writing_Mode" href="#Writing_Mode" class="clear">Writing Mode and Bidirectionality</a></dt>
                     <dt id="s#Links" class="topic"><a id="a#Links" href="#Links" class="clear">Links</a></dt>
                     <dt id="s#Leaders" class="topic"><a id="a#Leaders" href="#Leaders" class="clear">Leaders</a></dt>
                     <dt id="s#Footnotes_Floats" class="topic"><a id="a#Footnotes_Floats" href="#Footnotes_Floats" class="clear">Footnotes and Floats</a></dt>
                     <dt id="s#Page_Numbering" class="topic"><a id="a#Page_Numbering" href="#Page_Numbering" class="clear">Page Numbering and Page Number References</a></dt>
                     <dt id="s#Markers" class="topic"><a id="a#Markers" href="#Markers" class="clear">Markers</a></dt>
                  </dl>
               </dd>
               <dt><a id="a#Extensions" class="clear" href="#Extensions">RenderX Extensions</a></dt>
               <dd>
                  <dl>
                     <dt id="s#Document_Info" class="topic"><a id="a#Document_Info" href="#Document_Info" class="clear">Document Info</a></dt>
                     <dt id="s#PDF_Bookmarks" class="topic"><a id="a#PDF_Bookmarks" href="#PDF_Bookmarks" class="clear">PDF Bookmarks</a></dt>
                     <dt id="s#Indexes" class="topic"><a id="a#Indexes" href="#Indexes" class="clear">Indexes</a></dt>
                     <dt id="s#Flow_Sections" class="topic"><a id="a#Flow_Sections" href="#Flow_Sections" class="clear">Flow Sections</a></dt>
                  </dl>
               </dd>
               <dt id="s#Conclusion" class="topic"><a id="a#Conclusion" href="#Conclusion" class="clear">Conclusion</a></dt>
            </dl>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Introduction"></a>Introduction
                     </h2>
                  </div>
               </div>
            </div>
            <p>
               This document gives a quick, learn-by-example introduction to XSL Formatting
               Objects. I don't discuss subtle details of implementation, but rather
               provide a series of examples of how to perform routine tasks with XEP
               &#8212; an XSL formatter developed by RenderX, Inc.
               It is not a manual of XSL FO in general, and some examples given here
               may not work in other XSL FO formatters, or give different results.
               
            </p>
            <p>
               This tutorial was conceived as a means to facilitate reading of
               <em class="citetitle">XSL 1.0 Recommendation of October 15, 2001</em>. The normative text
               is available from W3C site: <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/2001/REC-xsl-20011015/" target="_top">http://www.w3.org/TR/2001/REC-xsl-20011015/</a>.
               You should obtain a copy of XSL 1.0 Recommendation, and refer to it for a complete
               description of objects and properties mentioned here.
               
            </p>
            <p>
               XEP 4.9 also implements several extensions to the
               XSL 1.0 Recommendation: they add support for useful
               functionality that cannot be expressed by standard XSL
               Formatting Objects. The last chapters of this document
               discuss available extensions in more detail. Needless to
               say, the extensions are proprietary and incompatible with
               other XSL formatters; please avoid their use whenever possible.
               
            </p>
            <p>
               Readers who aren't XEP users can download an evaluation copy of XEP from
               <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://shop.xattic.com" target="_top">http://shop.xattic.com</a>,
               and run the proposed examples to see how the formatter works. This
               manual is also available in XML format with an associated XSL FO
               stylesheet; browsing its source code may also be interesting (and
               instructive).
               
            </p>
            <p>
               XEP covers more of the spec than was needed for this manual. Please
               refer to XEP product documentation for a full list of supported
               elements and properties.
               
            </p>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Hello_World"></a>&#8220;Hello, World!&#8221;
                     </h2>
                  </div>
               </div>
            </div>
            <p>
               Let us create the shortest XSL FO document.
               
            </p>
            <div class="informalexample"><pre class="programlisting">
&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;<a name="co11"></a>&#10102;

&lt;fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format"&gt;<a name="co12"></a>&#10103;
  &lt;fo:layout-master-set&gt;<a name="co13"></a>&#10104;
    &lt;fo:simple-page-master master-name="my-page"&gt;
      &lt;fo:region-body margin="1in"/&gt;
    &lt;/fo:simple-page-master&gt;
  &lt;/fo:layout-master-set&gt;

  &lt;fo:page-sequence master-reference="my-page"&gt;<a name="co14"></a>&#10105;
    &lt;fo:flow flow-name="xsl-region-body"&gt;<a name="co15"></a>&#10106;
      &lt;fo:block&gt;Hello, world!&lt;/fo:block&gt;<a name="co16"></a>&#10107;
    &lt;/fo:flow&gt;
  &lt;/fo:page-sequence&gt;
&lt;/fo:root&gt;
      </pre><div class="calloutlist">
                  <table border="0" summary="Callout list">
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#co11">&#10102;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          This is an <span class="emphasis"><em>XML declaration</em></span>. XSL FO belongs
                                          to XML family, so this is obligatory.
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#co12">&#10103;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          <span class="emphasis"><em>Root element</em></span>. The obligatory namespace attribute
                                          declares the XSL Formatting Objects namespace.
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#co13">&#10104;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          <span class="emphasis"><em>Layout master set</em></span>. This element contains one or more
                                          declarations of <span class="emphasis"><em>page masters</em></span> and <span class="emphasis"><em>page sequence masters</em></span>
                                          &#8212; elements that define layouts of single pages and page sequences. In the
                                          example, I have defined a rudimentary page master, with only one area in it.
                                          The area should have a 1 inch margin from all sides of the page.
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#co14">&#10105;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          <span class="emphasis"><em>Page sequence</em></span>. Pages in the document are grouped
                                          into sequences; each sequence starts from a new page.
                                          <span class="property">Master-reference</span> attribute selects an appropriate layout
                                          scheme from masters listed inside <code class="sgmltag-starttag">&lt;fo:layout-master-set&gt;</code>.
                                          Setting <code class="sgmltag-attribute">master-reference</code> to a page master name means that
                                          all pages in this sequence will be formatted using this page master.
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#co15">&#10106;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          <span class="emphasis"><em>Flow</em></span>. This is the container object for all user text in the
                                          document. Everything contained in the flow will be formatted
                                          into regions on pages generated inside the page sequence. Flow
                                          name links the flow to a specific region on the page (defined
                                          in the page master); in our example, it is the <span class="emphasis"><em>body region</em></span>.
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#co16">&#10107;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          <span class="emphasis"><em>Block</em></span>. This object roughly corresponds to <code class="sgmltag-starttag">&lt;DIV&gt;</code>
                                          in HTML, and normally includes a paragraph of text. I need it here,
                                          because text cannot be placed directly into a flow.
                                        
                           </p>
                        </td>
                     </tr>
                  </table>
               </div>
            </div>
            <p>
               Now we can save this document into a file and compile it using XEP 4.9.
               to produce a PDF file. Open it with Acrobat Reader, and enjoy :-).
               
            </p>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Font_Attributes"></a>Font and Text Attributes
                     </h2>
                  </div>
               </div>
            </div>
            <p>
               Let us now enrich the text with character-level formatting.
               Several properties control font styles &#8212; family, size, color,
               weight, etc. Let's look at some examples:
               
            </p><pre class="programlisting">
&lt;fo:block font-family="Times" font-size="14pt"&gt;
  Hello, world!
&lt;/fo:block&gt;
    </pre><p>
               Font family is Times, and font size is 14 points.
               
            </p><pre class="programlisting">
&lt;fo:block font-family="Times" font-size="14pt" font-style="italic"&gt;
  &lt;fo:inline color="red"&gt;H&lt;/fo:inline&gt;ello,
  &lt;fo:inline font-weight="bold"&gt;world!&lt;/fo:inline&gt;
&lt;/fo:block&gt;
    </pre><p>
               Same as above, plus:
               
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     <p>the whole text is italicized (<code class="sgmltag-attribute">font-style</code>=<em class="parameter"><code>"italic"</code></em>);
                     </p>
                  </li>
                  <li>
                     <p>the first letter of the first word is written in red (<code class="sgmltag-attribute">color</code>=<em class="parameter"><code>"red"</code></em>);
                     </p>
                  </li>
                  <li>
                     <p>the second word is written in bold font (<code class="sgmltag-attribute">font-weight</code>=<em class="parameter"><code>"bold"</code></em>).
                     </p>
                  </li>
               </ul>
            </div>
            <p>
               Note a new formatting object &#8212; <code class="sgmltag-starttag">&lt;fo:inline&gt;</code>. It corresponds
               to <code class="sgmltag-starttag">&lt;SPAN&gt;</code> in HTML, and ascribes formatting to chunks of text
               within a block.
               
            </p>
            <p>
               Font properties are <span class="emphasis"><em>inheritable</em></span>. It means that, once defined for
               a formatting object, they apply to all formatting objects inside it.
               That's why the first inline sequence affects only the color of the
               font, leaving its family, size, and slant unmodified. Inheritable
               properties can be put almost everywhere on the formatting objects
               tree; as a rule, you specify default font for a document by  applying these
               properties to <code class="sgmltag-starttag">&lt;fo:flow&gt;</code>, <code class="sgmltag-starttag">&lt;fo:page-sequence&gt;</code> or even
               <code class="sgmltag-starttag">&lt;fo:root&gt;</code>.
               
            </p>
            <p>
               To reduce typing, you can use a shorthand notation for setting font
               attributes as a group. For example, the above example can be
               rewritten as follows:
               
            </p><pre class="programlisting">
&lt;fo:block font="italic 14pt Times"&gt;
  &lt;fo:inline color="red"&gt;H&lt;/fo:inline&gt;ello,
  &lt;fo:inline font-weight="bold"&gt;world!&lt;/fo:inline&gt;
&lt;/fo:block&gt;
    </pre><p>
               The <code class="sgmltag-attribute">font</code> property has the following syntax:
               
            </p><pre class="synopsis">[&lt;style, weight, and/or variant&gt;] &lt;size&gt;[/&lt;line height&gt;] &lt;family&gt;</pre><p>
               It sets all mentioned attributes to specified values, and resets
               all other font-related attributes to their default values, overriding
               inherited values. Be careful when using this feature: <code class="sgmltag-attribute">font</code>=<em class="parameter"><code>"14pt Times"</code></em>
               is not equivalent to a conjunction of <code class="sgmltag-attribute">font-size</code>=<em class="parameter"><code>"14pt"</code></em> &amp; <code class="sgmltag-attribute">font-family</code>=<em class="parameter"><code>"Times"</code></em>!
               
            </p>
            <p>
               Let's now build a full XSL FO example with font attributes
               introduced above, and some new ones:
               
            </p>
            <div class="informalexample"><pre class="programlisting">
&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;

&lt;fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format"&gt;
  &lt;fo:layout-master-set&gt;
    &lt;fo:simple-page-master master-name="my-page"&gt;
      &lt;fo:region-body margin="1in"/&gt;
    &lt;/fo:simple-page-master&gt;
  &lt;/fo:layout-master-set&gt;
  &lt;fo:page-sequence master-reference="my-page"&gt;
     &lt;fo:flow flow-name="xsl-region-body" font="12pt Times"<a name="co21"></a>&#10102;&gt;
       &lt;fo:block font="italic 24pt Helvetica"&gt;
         &lt;fo:inline color="red"&gt;F&lt;/fo:inline&gt;ont
         &lt;fo:inline color="red"&gt;A&lt;/fo:inline&gt;ttributes
       &lt;/fo:block&gt;
       &lt;fo:block&gt;<a name="co22"></a>&#10103;
         The inherited font for this block is 12pt Times.
       &lt;/fo:block&gt;
       &lt;fo:block&gt;
         Font attributes:
         &lt;fo:inline color="red"&gt;colored&lt;/fo:inline&gt;,
         &lt;fo:inline font-weight="bold"&gt;bold&lt;/fo:inline&gt;,
         &lt;fo:inline font-style="italic"&gt;italic&lt;/fo:inline&gt;,
         &lt;fo:inline font-size="75%"&gt;small&lt;/fo:inline&gt;,
         &lt;fo:inline font-size="133%"&gt;large&lt;/fo:inline&gt;.
       &lt;/fo:block&gt;
      &lt;fo:block&gt;
         Text attributes:<a name="co23"></a>&#10104;
         &lt;fo:inline text-decoration="underline"&gt;underlined&lt;/fo:inline&gt;,
         &lt;fo:inline letter-spacing="3pt"&gt; expanded &lt;/fo:inline&gt;,
         &lt;fo:inline word-spacing="6pt"&gt;
           text with extra spacing between words
         &lt;/fo:inline&gt;,
         &lt;fo:inline text-transform="uppercase"&gt;all capitals&lt;/fo:inline&gt;,
         &lt;fo:inline text-transform="capitalize"&gt;capitalized&lt;/fo:inline&gt;,
         text with &lt;fo:inline baseline-shift="sub"
         font-size="smaller"&gt;subscripts&lt;/fo:inline&gt;
         and &lt;fo:inline baseline-shift="super"
         font-size="smaller"&gt;superscripts&lt;/fo:inline&gt;.
      &lt;/fo:block&gt;
    &lt;/fo:flow&gt;
  &lt;/fo:page-sequence&gt;
&lt;/fo:root&gt;
      </pre><div class="calloutlist">
                  <table border="0" summary="Callout list">
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#co21">&#10102;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          A common font for the whole flow is specified.
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#co22">&#10103;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          This block inherits font attributes from the flow.
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#co23">&#10104;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          In this block, I introduce several other text-level properties:
                                        
                           </p>
                           <div class="variablelist">
                              <dl>
                                 <dt><span class="term"><span class="emphasis"><em>text decoration</em></span></span></dt>
                                 <dd>
                                    <p>underline/overline/strikethrough;</p>
                                 </dd>
                                 <dt><span class="term"><span class="emphasis"><em>letter</em></span> and <span class="emphasis"><em>word spacing</em></span></span></dt>
                                 <dd>
                                    <p>a positive value expands text, a negative value condenses it;</p>
                                 </dd>
                                 <dt><span class="term"><span class="emphasis"><em>text transformations</em></span></span></dt>
                                 <dd>
                                    <p>upper/lower case, capitalize;</p>
                                 </dd>
                                 <dt><span class="term"><span class="emphasis"><em>shifted text</em></span></span></dt>
                                 <dd>
                                    <p>subscripts and superscripts.</p>
                                 </dd>
                              </dl>
                           </div>
                        </td>
                     </tr>
                  </table>
               </div>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Blocks"></a>Blocks
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Text_Alignment"></a>Text Alignment, Line Height
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Let's consider this piece:</p><pre class="programlisting">
&lt;fo:block line-height="1.5" text-align="justify"&gt;
  This is an example of double-justified text.
  The space between lines is 1.5 of the nominal font height.
&lt;/fo:block&gt;
    </pre><p>
                  The <code class="sgmltag-attribute">line-height</code> property specifies the line height:
                  it can be expressed as a length, as a numeric value, or as
                  a percent. Numbers and percents are interpreted as multiples to
                  the nominal font height.
                  
               </p>
               <p>
                  <code class="sgmltag-attribute">Text-align</code> property defines the alignment of the text
                  within the block. XSL FO uses a specific coordinate system for
                  referring to block edges: instead of &#8216;left&#8217; and &#8216;right&#8217;,
                  side alignment is expressed in terms of <span class="emphasis"><em>inline progression
                        direction</em></span>. For Western scripts, glyphs on the line are
                  placed from left to right; therefore, left-aligned text will have
                  <code class="sgmltag-attribute">text-align</code>=<em class="parameter"><code>"start"</code></em>, and right-aligned text will have
                  <code class="sgmltag-attribute">text-align</code>=<em class="parameter"><code>"end"</code></em>. Two other values are
                  <em class="parameter"><code>"center"</code></em> and <em class="parameter"><code>"justify"</code></em> (same as in CSS).
                  You can also use other CSS values for this property &#8212;
                  <em class="parameter"><code>"left"</code></em> is a synonym for <em class="parameter"><code>start</code></em>,
                  and <em class="parameter"><code>"right"</code></em> is a synonym for <em class="parameter"><code>end</code></em>.
                  
               </p>
               <p>
                  Let's look into a more complicated example:
                  
               </p><pre class="programlisting">
&lt;fo:block text-align="justify" text-indent="1in"
          text-align-last="end" last-line-end-indent="1in"&gt;
  This is an example of double-justified text with an indented first line.
  The last line of the text is aligned to the right, and indented
  by 1 inch from the right.
&lt;/fo:block&gt;
    </pre><p>
                  This fragment should be formatted as follows:
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>text is double justified (<code class="sgmltag-attribute">text-align</code>);
                        </p>
                     </li>
                     <li>
                        <p>the first line is indented by 1 inch from the left  (<code class="sgmltag-attribute">text-indent</code>);
                        </p>
                     </li>
                     <li>
                        <p>the last line is aligned to the right  (<code class="sgmltag-attribute">text-align-last</code>);
                        </p>
                     </li>
                     <li>
                        <p>the last line is indented by 1 inch from the right (<code class="sgmltag-attribute">last-line-end-indent</code>).
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                  By specifying a negative value for
                  <code class="sgmltag-attribute">text-indent</code> / <code class="sgmltag-attribute">last-line-end-indent</code>,
                  it is possible to create outdents. To make the text stay within
                  the limits, two more properties are used that control indentation
                  of the text as a whole:
                  
               </p><pre class="programlisting">
&lt;fo:block text-align="start" text-indent="-1in"
          text-align-last="end" last-line-end-indent="-1in"
          start-indent="1in" end-indent="1in"&gt;
  This is an example of left-aligned text with an outdented first line.
  The last line of the text is aligned to the right, and outdented
  by 1 inch from the right.
&lt;/fo:block&gt;
    </pre><p>
                  The names of properties <code class="sgmltag-attribute">start-indent</code> and
                  <code class="sgmltag-attribute">end-indent</code> follow the same logic as the values
                  for <code class="sgmltag-attribute">text-indent</code>: <code class="sgmltag-attribute">start-indent</code>
                  controls white space added at the beginning of every line,
                  and <code class="sgmltag-attribute">end-indent</code> adds a margin at the end of every line.
                  
               </p>
               <p>
                  To complete this chapter, let's introduce attributes to position
                  blocks vertically with respect to each other: <code class="sgmltag-attribute">space-before</code>
                  and <code class="sgmltag-attribute">space-after</code>. Their names also derive from the
                  writing-mode approach: &#8216;<code class="literal">before</code>&#8217; means &#8220;before
                  the first line&#8221;, and &#8216;<code class="literal">after</code>&#8217; implies
                  &#8220;after the last line&#8221;.
                  
               </p>
               <p>
                  Spaces are more complicated than indents: they aren't specified as
                  a single value, but rather as a vector of several components &#8212; minimum,
                  optimum, and maximum value for the space. Components can be assigned separately:
                  an attribute name will consist of a property name followed by a component name,
                  separated by a dot. You can also assign all numeric components the same value
                  by using the attribute name without a component qualifier; this is what you
                  normally do in most cases.
                  
               </p>
               <p>
                  An important property of spaces is that <span class="emphasis"><em>they aren't additive:</em></span>
                  if there are several space specifiers between two blocks (e.g.
                  <code class="sgmltag-attribute">space-after</code> on a preceding block
                  and <code class="sgmltag-attribute">space-before</code>
                  on a following block), a single space value is chosen so as to
                  satisfy all applicable constraints. Apparently, spaces merge and
                  don't sum up. (The real rules for space resolution are
                  more complicate; please refer to the XSL FO specs).
                  
               </p>
               <p>The fragment below illustrates the use of spaces:</p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:flow flow-name="xsl-region-body" font="14pt Times"&gt;
  &lt;fo:block font-size="24pt"
            text-align="center"
            space-before="30pt"
            space-before.conditionality="retain"<a name="co31"></a>&#10102;
            space-after="12pt"&gt;The Jabberwocky&lt;/fo:block&gt;
  &lt;fo:block font-style="italic"
            text-align="end"
            space-before="12pt"
            space-after="9pt"&gt;Lewis Carroll&lt;/fo:block&gt;
  &lt;fo:block start-indent="1.5in" space-after="9pt"&gt;
    &lt;fo:block&gt;&amp;#8217;<a name="co32"></a>&#10103;Twas brillig, and the slithy toves&lt;/fo:block&gt;
    &lt;fo:block&gt;Did gyre and gimble in the wabe:&lt;/fo:block&gt;
    &lt;fo:block&gt;All mimsy were the borogoves,&lt;/fo:block&gt;
    &lt;fo:block&gt;And the mome raths outgrabe.&lt;/fo:block&gt;
  &lt;/fo:block&gt;
  &lt;fo:block start-indent="1.5in" space-after="9pt"&gt;
    &lt;fo:block&gt;&amp;#8220;<a name="co33"></a>&#10104;Beware the Jabberwock, my son!&lt;/fo:block&gt;
    &lt;fo:block&gt;The jaws that bite, the claws that catch!&lt;/fo:block&gt;
    &lt;fo:block&gt;Beware the Jubjub bird, and shun&lt;/fo:block&gt;
    &lt;fo:block&gt;The frumious Bandersnatch!&amp;#8221;<a name="co34"></a>&#10105;&lt;/fo:block&gt;
  &lt;/fo:block&gt;
&lt;/fo:flow&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co31">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             By default, <code class="sgmltag-attribute">space-before</code> at the top of the page and
                                             <code class="sgmltag-attribute">space-after</code> at the bottom of the page are suppressed.
                                             To force them, specify <span class="property">.conditionality</span>=<em class="parameter"><code>"retain"</code></em>.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co32">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="literal">&amp;#8217;</code> is a UCS code for right single quote. XEP addresses all
                                             characters by their Unicode values.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co33">&#10104;</a> <a href="#co34">&#10105;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="literal">&amp;#8220;</code> and <code class="literal">&amp;#8221;</code> are UCS codes for left and right double quotes.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Borders"></a>Borders, Padding, and Background
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  Blocks may have <span class="emphasis"><em>borders</em></span> from either side.
                  Sides can be addressed either in an absolute orientation scheme
                  (<span class="property">left</span>, <span class="property">right</span>,
                  <span class="property">top</span>, and <span class="property">bottom</span>), or in a
                  writing-mode relative scheme (resp. <span class="property">start</span>, <span class="property">end</span>,
                  <span class="property">before</span>, and <span class="property">after</span>).
                  
               </p>
               <p>
                  Every border has the following properties, that may get the
                  following values in XSL FO:
                  
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term"><code class="sgmltag-attribute">color</code></span></dt>
                     <dd>
                        <p>one of 16 predefined HTML system colors, or an RGB value;</p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-attribute">style</code></span></dt>
                     <dd>
                        <p>
                           	<em class="parameter"><code>solid</code></em>, <em class="parameter"><code>dashed</code></em>,
                           	        <em class="parameter"><code>dotted</code></em>, <em class="parameter"><code>double</code></em>, <em class="parameter"><code>inset</code></em>,
                           	        <em class="parameter"><code>outset</code></em>, <em class="parameter"><code>groove</code></em>, <em class="parameter"><code>ridge</code></em>,
                           	        or <em class="parameter"><code>none</code></em>;
                           
                        </p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-attribute">width</code></span></dt>
                     <dd>
                        <p>
                           	    <em class="parameter"><code>thin</code></em>, <em class="parameter"><code>medium</code></em>,
                           	    <em class="parameter"><code>thick</code></em>, or an explicit width specification.
                           	  
                        </p>
                     </dd>
                  </dl>
               </div>
               <p>
                  You can specify each property for each border separately by writing  several attributes
                  of the form <code class="sgmltag-attribute">border-<em class="replaceable"><code>{side}</code></em>-<em class="replaceable"><code>{property}</code></em></code>:
                  
               </p><pre class="programlisting">
&lt;fo:block border-top-color="black"
          border-top-style="solid"
          border-top-width="thick"
          text-align="center"&gt;
  Thick black border at the top
&lt;/fo:block&gt;
    </pre><p>
                  You can also specify properties for all the four sides as a whole,
                  using a shorthand notation <code class="sgmltag-attribute">border-<em class="replaceable"><code>{property}</code></em></code>:
                  
               </p><pre class="programlisting">
&lt;fo:block border-color="gray"
          border-style="groove"
          border-width="medium"
          text-align="center"&gt;
  Medium gray groove around the whole block
&lt;/fo:block&gt;
    </pre><p>
                  You can also group properties that refer to one side into a single
                  shorthand attribute <code class="sgmltag-attribute">border-<em class="replaceable"><code>{side}</code></em></code>. However, only
                  absolutely oriented side names (<span class="property">top</span>, <span class="property">bottom</span>,
                  <span class="property">left</span>, and <span class="property">right</span>) are permitted in this
                  position. An example:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:block text-align="center"
          border-top="dashed 1pt #C00000"<a name="co41"></a>&#10102;
          border-bottom="1pt dashed #C00000"&gt;
  1pt dashed red border at the top and bottom
&lt;/fo:block&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co41">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Elements inside the attribute can be specified in any order, separated by spaces.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                  Finally, a single <code class="sgmltag-attribute">border</code> attribute can
                  accumulate properties that are ascribed to all the four sides:
                  
               </p><pre class="programlisting">
&lt;fo:block border="thin silver ridge"
          text-align="center"&gt;
  Thin silver ridge around the whole block
&lt;/fo:block&gt;
    </pre><p>
                  When printed, a block may be split by a page break or
                  a column break. What happens to the borders adjacent to
                  the breakline? For some block types, you may want to box
                  every part of the original block separately, i.e. draw
                  a border line where the break occurs; this is the default
                  behaviour in XSL FO. For some other blocks, you may prefer to
                  &#8220;keep the box open&#8221; suppressing borders at
                  column/page breaks. This behavior is controlled by a special
                  component of the border's width &#8212;
                  <code class="sgmltag-attribute">border-<em class="replaceable"><code>{side}</code></em>-width.conditionality</code>:
                  
               </p><pre class="programlisting">
&lt;fo:block border="thin blue groove"
          border-before-width.conditionality="discard"
          border-after-width.conditionality="discard"&gt;
  If this block happens to be split by a page break,
  no line will be drawn on either side of the break.
&lt;/fo:block&gt;
    </pre><p>
                  Only writing-mode oriented sides (<span class="property">before</span>,
                  <span class="property">after</span>, <span class="property">start</span>, and <span class="property">end</span>)
                  are permitted in the conditional border expressions.
                  
               </p>
               <p>
                  Once you have set a border around an object, you normally
                  want to specify a <span class="emphasis"><em>padding</em></span> between the text and
                  the border. This is done by <code class="sgmltag-attribute">padding-<em class="replaceable"><code>{side}</code></em></code>
                  attributes:
                  
               </p><pre class="programlisting">
&lt;fo:block border="thin solid navy"
          text-align="center"
          padding-before="18pt"
          padding-bottom="18pt"&gt;
  &lt;fo:block border="thin solid maroon"&gt;
    The outer block has a 18 pt padding from top and bottom
  &lt;/fo:block&gt;
&lt;/fo:block&gt;
    </pre><p>
                  There also exists a shorthand <code class="sgmltag-attribute">padding</code> attribute:
                  
               </p><pre class="programlisting">
&lt;fo:block border="thin solid navy"
          text-align="center"
          padding="2cm"&gt;
  &lt;fo:block border="thin solid maroon"&gt;
    The outer block has a 2 cm padding from all sides
  &lt;/fo:block&gt;
&lt;/fo:block&gt;
    </pre><p>
                  You can also specify several numbers as
                  a value for <code class="sgmltag-attribute">padding</code> attributes:
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                           if there are two values, the top and bottom paddings are set
                           to the first value and the right and left paddings are set to
                           the second;
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           if there are three values, the top is set to the first value,
                           the left and right are set to the second, and the bottom one
                           is set to the third;
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           if there are four values, they apply to the top, right, bottom,
                           and left, respectively.
                           
                        </p>
                     </li>
                  </ul>
               </div>
               <p>Example:</p><pre class="programlisting">
&lt;fo:block border="thin solid navy"
          text-align="center"
          padding="1cm 3cm"&gt;
  &lt;fo:block border="thin solid maroon"&gt;
    The outer block has 1 cm padding from top and bottom,
    and 3 cm padding from right and left.
  &lt;/fo:block&gt;
&lt;/fo:block&gt;
    </pre><p>
                  Like borders, padding may be conditional at page breaks:
                  specifying <code class="sgmltag-attribute">padding-<em class="replaceable"><code>{side}</code></em>.conditionality="discard"</code>
                  suppresses padding before or after a page break. Like for borders,
                  only writing-mode oriented sides (<span class="property">before</span>,
                  <span class="property">after</span>, <span class="property">start</span>, and <span class="property">end</span>)
                  are permitted in this position.
                  
               </p>
               <p>
                  To complete the picture, let's learn how to set
                  <span class="emphasis"><em>backgrounds</em></span> for blocks.
                  
               </p>
               <p>
                  Blocks may have different backgrounds &#8212; colored or even
                  decorated with a graphic. To specify a color for the
                  background, use <code class="sgmltag-attribute">background-color</code> property:
                  
               </p><pre class="programlisting">
&lt;fo:block color="yellow"
          background-color="red"
          padding="12pt"
          text-align="center"&gt;
  Yellow on red
&lt;/fo:block&gt;
    </pre><p>
                  To add a background image to the block, you should
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>specify image source &#8212; <code class="sgmltag-attribute">background-image</code>;
                        </p>
                     </li>
                     <li>
                        <p>specify image position &#8212; <code class="sgmltag-attribute">background-position</code>;
                        </p>
                     </li>
                     <li>
                        <p>specify whether the image should be repeated along any of the axes
                           &#8212; <code class="sgmltag-attribute">background-repeat</code>.
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                  The <code class="sgmltag-attribute">background-image</code> attribute specifies an URI of the
                  bitmap image file. XEP handles HTTP, FTP, and file system resource locators
                  in URIs. An unqualified URI is treated as a path to a file in the local file
                  system; if the path is relative, it is calculated from the location of the
                  source XSL FO document (rather than from the current directory where XEP is run).
                  Note also the <code class="function">url('&#8230;')</code> function-like wrapper around the file name:
                  this is required by the XSL 1.0 Recommendation. (XEP recognizes
                  unwrapped URLs, too).
                  
               </p>
               <div class="note">
                  <h3 class="title">Note:</h3>
                  <p>
                     Under Win32, absolute pathnames may contain a colon after the disk letter.
                     These colons confuse Java URI resolver: the disk letter is treated as protocol
                     name. Use an unabridged file URI: 
                  </p><pre class="synopsis">file:/C:/XEP/myimage.jpg</pre><p>
                     
                  </p>
               </div>
               <p>
                  
               </p>
               <p>Example:</p><pre class="programlisting">
&lt;fo:block border="0.5pt solid silver"
          background-image="url('spots.jpg')"
          padding="18pt"
          text-align="center"&gt;
  The whole background tiled with colored spots
&lt;/fo:block&gt;
    </pre><p>
                  By default, an image specified in <code class="sgmltag-attribute">background-image</code>
                  tiles the whole block. To insert only a single instance, disable
                  tiling by setting <code class="sgmltag-attribute">background-repeat</code>=<em class="parameter"><code>"no-repeat"</code></em>:
                  
               </p><pre class="programlisting">
&lt;fo:block border="0.5pt solid silver"
          background-image="url('spots.jpg')"
          background-repeat="no-repeat"
          background-position-horizontal="center"
          background-position-vertical="center"
          padding="18pt"
          text-align="center"&gt;
  A single image placed 18pt to the right
  and 6pt below the upper left corner.
&lt;/fo:block&gt;
    </pre><p>
                  The position of the image within the block is controlled by two properties,
                  <code class="sgmltag-attribute">background-position-horizontal</code> and <code class="sgmltag-attribute">background-position-vertical</code>.
                  The <code class="sgmltag-attribute">background-position</code> shorthand property from CSS2 can also
                  be used:
                  
               </p><pre class="programlisting">
&lt;fo:block border="0.5pt solid silver"
          background-image="url('spots.jpg')"
          background-repeat="repeat-y"
          background-position="left center"
          background-color="silver"
          padding="18pt"
          text-align="center"&gt;
  A stripe made of coloured spots along the left edge of the block;
  the rest of the block has a silver background.
&lt;/fo:block&gt;
    </pre><p>
                  XSL Recommendation defines no method to scale the background image. To do it,
                  you have to recur to RenderX add-ons; see description of
                  <code class="sgmltag-attribute">rx:background-content-width</code>,
                  <code class="sgmltag-attribute">rx:background-content-height</code>, and
                  <code class="sgmltag-attribute">rx:background-scaling</code> extension properties
                  in the documentation for XEP 4.9.
                  
               </p>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Page_Layout"></a>Page Layout
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Page_Masters"></a>Page Sequence Masters
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  So far, I have used only single page masters in examples. In this
                  section, more complex cases will be analyzed. To start, let's
                  design a page sequence with two page masters: one for the first
                  page, the other one for the rest of the document.
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;

&lt;fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format"&gt;
  &lt;fo:layout-master-set&gt;
    &lt;fo:simple-page-master master-name="first-page"&gt;
      &lt;fo:region-body margin="1in" border="thin silver ridge"<a name="co51"></a>&#10102;
                                      padding="6pt"/&gt;
    &lt;/fo:simple-page-master&gt;
    &lt;fo:simple-page-master master-name="all-pages"&gt;
      &lt;fo:region-body margin="1in"/&gt;
    &lt;/fo:simple-page-master&gt;
    &lt;fo:page-sequence-master master-name="my-sequence"&gt;<a name="co52"></a>&#10103;
      &lt;fo:single-page-master-reference master-reference="first-page"/&gt;<a name="co53"></a>&#10104;
      &lt;fo:repeatable-page-master-reference master-reference="all-pages"/&gt;<a name="co54"></a>&#10105;
    &lt;/fo:page-sequence-master&gt;
  &lt;/fo:layout-master-set&gt;
  &lt;fo:page-sequence master-reference="my-sequence"<a name="co55"></a>&#10106;&gt;
    &lt;fo:flow flow-name="xsl-region-body" font="72pt Times"&gt;
       &lt;fo:block space-before="2in" space-after="2in"&gt;<a name="co56"></a>&#10107;
         First block
       &lt;/fo:block&gt;
       &lt;fo:block space-before="2in" space-after="2in"&gt;<a name="co57"></a>&#10108;
         Second block
       &lt;/fo:block&gt;
       &lt;fo:block space-before="2in" space-after="2in"&gt;
         Third block
       &lt;/fo:block&gt;
    &lt;/fo:flow&gt;
  &lt;/fo:page-sequence&gt;
&lt;/fo:root&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co51">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             In XSL FO, you can specify borders, padding, and background on regions in exactly
                                             the same way as you do it on blocks. The first page in this example will
                                             have a border around it, while others will remain borderless.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co52">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             The <span class="emphasis"><em>page sequence master</em></span> defines the chain of page masters
                                             to use for a page sequence.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co53">&#10104;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="sgmltag-starttag">&lt;fo:single-page-master-reference&gt;</code> inserts a single page master in the chain.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co54">&#10105;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="sgmltag-starttag">&lt;fo:repeatable-page-master-reference&gt;</code> makes the specified page masters repeat up to the end of the chain.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co55">&#10106;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Note that <code class="sgmltag-attribute">master-reference</code> attribute of a <code class="sgmltag-starttag">&lt;fo:page-sequence&gt;</code>
                                             can refer to either a <code class="sgmltag-starttag">&lt;fo:page-sequence-master&gt;</code> or a
                                             <code class="sgmltag-starttag">&lt;fo:simple-page-master&gt;</code>. In the latter, all pages
                                             generated by this <code class="sgmltag-starttag">&lt;fo:page-sequence&gt;</code> will use the same
                                             page master.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co56">&#10107;</a> <a href="#co57">&#10108;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Spaces <span class="emphasis"><em>are not inheritable</em></span>: you cannot specify them
                                             on a surrounding  block. There's no alternative to specifying
                                             them explicitly on every block involved.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                  You can also specify different page masters for odd and even pages,
                  blank pages, first/last pages, etc. This is achieved by using a more
                  complex sequence specifier &#8212;
                  <code class="sgmltag-starttag">&lt;fo:repeatable-page-master-alternatives&gt;</code>. It contains one
                  or more <code class="sgmltag-starttag">&lt;fo:conditional-page-master-reference&gt;</code> elements;
                  each of these elements specifies a name of a page master and a set of
                  conditions that should be satisfied for this page master to apply. When
                  generating a page chain, the alternatives inside
                  <code class="sgmltag-starttag">&lt;fo:conditional-page-master-reference&gt;</code> are looked from left
                  to right, and the first one for which all the conditions hold will be
                  chosen.
                  
               </p>
               <p>
                  In the example below, the first page will have a thin silver border
                  around it, and all other pages will have a border along the
                  inside edge of the body area (left for even pages, right for
                  odd ones).
                  
               </p><pre class="programlisting">
  &lt;fo:layout-master-set&gt;
    &lt;fo:simple-page-master master-name="first-page"&gt;
      &lt;fo:region-body margin="1in" border="thin solid silver"
                                   padding="6pt"/&gt;
    &lt;/fo:simple-page-master&gt;
    &lt;fo:simple-page-master master-name="odd-page"&gt;
      &lt;fo:region-body margin="1in" border-right="medium gray ridge"
                                   padding-right="6pt"/&gt;
    &lt;/fo:simple-page-master&gt;
    &lt;fo:simple-page-master master-name="even-page"&gt;
      &lt;fo:region-body margin="1in" border-left="medium gray ridge"
                                   padding-left="6pt"/&gt;
    &lt;/fo:simple-page-master&gt;
    &lt;fo:page-sequence-master master-name="my-sequence"&gt;
      &lt;fo:repeatable-page-master-alternatives&gt;
        &lt;fo:conditional-page-master-reference page-position="first"
                                              master-reference="first-page"/&gt;
        &lt;fo:conditional-page-master-reference odd-or-even="odd"
                                              master-reference="odd-page"/&gt;
        &lt;fo:conditional-page-master-reference odd-or-even="even"
                                              master-reference="even-page"/&gt;
      &lt;/fo:repeatable-page-master-alternatives&gt;
    &lt;/fo:page-sequence-master&gt;
  &lt;/fo:layout-master-set&gt;
  &lt;fo:page-sequence master-reference="my-sequence"&gt;
    &#8230;
    &#8230;
    &#8230;
    </pre></div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Areas"></a>Areas, Flows, Static Contents
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  So far, I only placed the contents into the body region of the page
                  master. There are other regions on the page, used to display static
                  elements of page layout &#8212; headers, footers, and sidebars.
                  Inside page master, there may be up to five region specifications:
                  
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;fo:region-body&gt;</code></span></dt>
                     <dd>
                        <p>the central part of the page; required</p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;fo:region-before&gt;</code></span></dt>
                     <dd>
                        <p>header region</p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;fo:region-after&gt;</code></span></dt>
                     <dd>
                        <p>footer region</p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;fo:region-start&gt;</code></span></dt>
                     <dd>
                        <p>left sidebar region</p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;fo:region-end&gt;</code></span></dt>
                     <dd>
                        <p>right sidebar region</p>
                     </dd>
                  </dl>
               </div>
               <p>
                  The dimensions of the regions are calculated by the following
                  algorithm:
                  
               </p>
               <div class="orderedlist">
                  <ol type="1">
                     <li>
                        <p>
                           The page size is controlled by <code class="sgmltag-attribute">page-height</code> and
                           <code class="sgmltag-attribute">page-width</code> properties of the
                           <code class="sgmltag-starttag">&lt;fo:simple-page-master&gt;</code>. There also exists a
                           <code class="sgmltag-attribute">size</code> shorthand property to set the page size.
                           Worth noting are <em class="parameter"><code>"portrait"</code></em> and
                           <em class="parameter"><code>"landscape"</code></em> values
                           to set the default page size with different orientation.
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           The size of region-body is determined by margins around it
                           (calculated from page bounding rectangle).
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           All other regions stick to the correspondent edge on the page.
                           Their width/height is given by the <code class="sgmltag-attribute">extent</code> property.
                           Note that side regions does not influence the position of the
                           region-body; so, the correspondent margin of the region-body
                           must be wide enough for the side regions to fit &#8212; not less
                           than the <code class="sgmltag-attribute">extent</code> of the correspondent side region.
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           To control the allocation of page corners to either sidebars or
                           headers/footers, a special <code class="sgmltag-attribute">precedence</code> attribute
                           is used on side  regions: if set to <em class="parameter"><code>"true"</code></em>, its
                           bearer captures the corner. In case of equal precedences,
                           headers/footers win.
                           
                        </p>
                     </li>
                  </ol>
               </div>
               <p>
                  All regions may have borders, padding and background. However, the
                  XSL 1.0 Recommendation is contradictory with respect to borders and padding
                  on all region areas but <code class="sgmltag-starttag">&lt;fo:region-body&gt;</code>: the
                  respective properties are listed, but there is a notice in
                  the text that requires borders and padding to be 0. XEP implements
                  borders and padding on all regions, but you are warned.
                  
               </p>
               <p>
                  Regions are named using a special <code class="sgmltag-attribute">region-name</code> property.
                  This property has a different default value for each of the regions:
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="parameter"><code>"xsl-region-body"</code></em> for <code class="sgmltag-starttag">&lt;fo:region-body&gt;</code>,
                        </p>
                     </li>
                     <li>
                        <p><em class="parameter"><code>"xsl-region-before"</code></em> for <code class="sgmltag-starttag">&lt;fo:region-before&gt;</code>,
                        </p>
                     </li>
                     <li>
                        <p><em class="parameter"><code>"xsl-region-after"</code></em> for <code class="sgmltag-starttag">&lt;fo:region-after&gt;</code>,
                        </p>
                     </li>
                     <li>
                        <p><em class="parameter"><code>"xsl-region-start"</code></em> for <code class="sgmltag-starttag">&lt;fo:region-start&gt;</code>,
                        </p>
                     </li>
                     <li>
                        <p><em class="parameter"><code>"xsl-region-end"</code></em> for <code class="sgmltag-starttag">&lt;fo:region-end&gt;</code>.
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                  To put contents into side regions, a special formatting object &#8212;
                  <code class="sgmltag-starttag">&lt;fo:static-content&gt;</code> &#8212; is placed inside
                  <code class="sgmltag-starttag">&lt;fo:page-sequence&gt;</code>. It is bound to a specific region by
                  the <code class="sgmltag-attribute">flow-name</code> property that should match the
                  <code class="sgmltag-attribute">region-name</code> of a region in a page-master.
                  The contents of a <code class="sgmltag-starttag">&lt;fo:static-content&gt;</code> is formatted
                  in the respective region on every page produced by this page-master.
                  
               </p>
               <p>
                  Let us now look at the examples. The simplest example just adds
                  a header to &#8220;Hello, world!&#8221;:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
  &lt;fo:layout-master-set&gt;
    &lt;fo:simple-page-master master-name="my-page"&gt;
      &lt;fo:region-body margin="1.5in 1in"<a name="co61"></a>&#10102;/&gt;
      &lt;fo:region-before extent="1.5in"
                        padding="6pt 1in"
                        border-bottom="0.5pt silver solid"
                        display-align="after"<a name="co62"></a>&#10103;/&gt;
    &lt;/fo:simple-page-master&gt;
  &lt;/fo:layout-master-set&gt;
  &lt;fo:page-sequence master-reference="my-page"&gt;
    &lt;fo:static-content flow-name="xsl-region-before"<a name="co63"></a>&#10104;
                       font="italic 10pt Times"&gt;
       &lt;fo:block&gt;"Hello, world!" Example&lt;/fo:block&gt;
    &lt;/fo:static-content&gt;
    &lt;fo:flow flow-name="xsl-region-body"&gt;
       &lt;fo:block&gt;Hello, world!&lt;/fo:block&gt;
    &lt;/fo:flow&gt;
  &lt;/fo:page-sequence&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co61">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Margins can be set by multiple values inside the <code class="sgmltag-attribute">margin</code>
                                             shorthand: assignment of values to sides is the same as for <code class="sgmltag-attribute">padding</code>.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co62">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="sgmltag-attribute">display-align</code> specifies the alignment of the contents
                                             inside the area. It is a common technique to set it to <em class="parameter"><code>"before"</code></em>
                                             for headers.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co63">&#10104;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             The default name for the header region is used.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                  Another example uses sidebars. It draws a right sidebar
                  on odd pages, and a left sidebar on even pages:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
  &lt;fo:layout-master-set&gt;
    &lt;fo:simple-page-master master-name="even-page"&gt;
      &lt;fo:region-body margin="1in 1.5in"
                      column-count="2"<a name="co71"></a>&#10102; column-gap="0.5in"/&gt;
      &lt;fo:region-start extent="1.5in"
                       region-name="my-left-sidebar"
                       reference-orientation="90"<a name="co72"></a>&#10103;
                       padding="6pt 1in"
                       border-right="0.5pt silver solid"<a name="co73"></a>&#10104;
                       display-align="after"/&gt;
    &lt;/fo:simple-page-master&gt;
    &lt;fo:simple-page-master master-name="odd-page"&gt;
      &lt;fo:region-body margin="1in 1.5in"
                      column-count="3"<a name="co74"></a>&#10105; column-gap="0.5in"/&gt;
      &lt;fo:region-end   extent="1.5in"
                       region-name="my-right-sidebar"
                       reference-orientation="-90"
                       padding="6pt 1in"
                       border-left="0.5pt silver solid"
                       display-align="after"/&gt;
    &lt;/fo:simple-page-master&gt;
    &lt;fo:page-sequence-master master-name="my-sequence"&gt;
      &lt;fo:repeatable-page-master-alternatives&gt;
        &lt;fo:conditional-page-master-reference odd-or-even="odd"
                                            master-reference="odd-page"/&gt;
        &lt;fo:conditional-page-master-reference odd-or-even="even"
                                            master-reference="even-page"/&gt;
      &lt;/fo:repeatable-page-master-alternatives&gt;
    &lt;/fo:page-sequence-master&gt;
  &lt;/fo:layout-master-set&gt;
  &lt;fo:page-sequence master-reference="my-sequence"&gt;
    &lt;fo:static-content flow-name="my-left-sidebar"
                          font="italic 10pt Times"&gt;
       &lt;fo:block text-align="end"&gt;
         Left sidebar on an even page
       &lt;/fo:block&gt;
    &lt;/fo:static-content&gt;
    &lt;fo:static-content flow-name="my-right-sidebar"
                          font="italic 10pt Times"&gt;
       &lt;fo:block text-align="start"&gt;
         Right sidebar on an odd page
       &lt;/fo:block&gt;
    &lt;/fo:static-content&gt;
    &#8230;
    &#8230;
    &#8230;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co71">&#10102;</a> <a href="#co74">&#10105;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Body region may have <span class="emphasis"><em>multiple columns</em></span>; other
                                             regions may not. The last attribute specifies the gap between
                                             columns.
                                             
                              </p>
                              <div class="note">
                                 <h3 class="title">Note:</h3>
                                 <p>
                                                    Number of columns may differ across pages within a single
                                                    flow. In this example, all odd pages will have three columns while
                                                    all even pages will have two.
                                                  
                                 </p>
                              </div>
                              <p>
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co72">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="sgmltag-attribute">reference-orientation</code> attribute specifies
                                             rotation of coordinate axes for the region; its value
                                             is an angle of rotation counterclockwise (in degrees;
                                             must be multiple of 90; negative values rotate clockwise).
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co73">&#10104;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Note that sides of the region are referenced
                                             with respect to the original (not rotated) orientation!
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Complex_Structures"></a>More Complex Structures
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Lists"></a>Lists
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  <span class="emphasis"><em>Lists</em></span> in XSL FO are much more than just a bulleted
                  sequence of paragraphs: it is a general-purpose mechanism to align
                  two blocks adjacent to each other. It may be used to format ordinary
                  lists, footnotes, image lists, and even to produce some table-like
                  layout patterns.
                  
               </p>
               <p>
                  A list is created by a <code class="sgmltag-starttag">&lt;fo:list-block&gt;</code> object.
                  Inside it, there are one or more <code class="sgmltag-starttag">&lt;fo:list-item&gt;</code> elements.
                  Each list item contains one <code class="sgmltag-starttag">&lt;fo:list-item-label&gt;</code>
                  followed by one <code class="sgmltag-starttag">&lt;fo:list-item-body&gt;</code>. These two
                  elements contain blocks that are aligned vertically and
                  placed side-by-side.
                  
               </p>
               <p>Let's start with an ordinary bulleted list:</p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:list-block provisional-distance-between-starts="18pt"<a name="co81"></a>&#10102;
               provisional-label-separation="3pt"<a name="co82"></a>&#10103;&gt;
  &lt;fo:list-item&gt;
    &lt;fo:list-item-label end-indent="label-end()"<a name="co83"></a>&#10104;&gt;
      &lt;fo:block&gt;&amp;#x2022;<a name="co84"></a>&#10105;&lt;/fo:block&gt;
    &lt;/fo:list-item-label&gt;
    &lt;fo:list-item-body start-indent="body-start()"<a name="co85"></a>&#10106;&gt;
       &lt;fo:block&gt;First item&lt;/fo:block&gt;
    &lt;/fo:list-item-body&gt;
  &lt;/fo:list-item&gt;
  &lt;fo:list-item&gt;
    &lt;fo:list-item-label end-indent="label-end()"&gt;
      &lt;fo:block&gt;&amp;#x2022;&lt;/fo:block&gt;
    &lt;/fo:list-item-label&gt;
    &lt;fo:list-item-body start-indent="body-start()"&gt;
       &lt;fo:block&gt;Second item&lt;/fo:block&gt;
    &lt;/fo:list-item-body&gt;
  &lt;/fo:list-item&gt;
&lt;/fo:list-block&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co81">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This property specifies how far the left side of the label is distant
                                             from the left side of the body.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co82">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This property specifies the separation between the right side
                                             of the label and the left edge of the body.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co83">&#10104;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="sgmltag-attribute">end-indent</code> attribute specifies the offset of the
                                             right edge of <code class="sgmltag-starttag">&lt;fo:list-item-label&gt;</code> from the right
                                             edge of the reference area (i.e. page). A special <code class="function">label-end()</code>
                                             function sets it to the value calculated from <code class="sgmltag-attribute">provisional-distance-between-starts</code>
                                             and <code class="sgmltag-attribute">provisional-label-separation</code> values. However, this
                                             is not a default value: you have to specify <code class="sgmltag-attribute">end-indent</code>=<em class="parameter"><code>"<code class="function">label-end()</code>"</code></em>
                                             on each <code class="sgmltag-starttag">&lt;fo:list-item-label&gt;</code> in the list. Alternatively,
                                             you can use an explicit value of <code class="sgmltag-attribute">end-indent</code>.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co84">&#10105;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This is a Unicode for a round bullet.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co85">&#10106;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="sgmltag-attribute">start-indent</code> attribute specifies the left offset
                                             of the <code class="sgmltag-starttag">&lt;fo:list-item-body&gt;</code> from the left. A special
                                             <code class="function">body-start()</code> function sets it to the value calculated
                                             from <code class="sgmltag-attribute">provisional-distance-between-starts</code>. Like for
                                             the <code class="sgmltag-starttag">&lt;fo:list-item-label&gt;</code>, this is not a default value;
                                             don't forget to specify it on each <code class="sgmltag-starttag">&lt;fo:list-item-body&gt;</code>.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                  Another example &#8212; using <code class="sgmltag-starttag">&lt;fo:list-block&gt;</code> to align text
                  in a header:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:static-content flow-name="xsl-region-before"&gt;
  &lt;fo:list-block border-bottom="1pt gray ridge"<a name="co91"></a>&#10102; padding-after="6pt"&gt;
    &lt;fo:list-item&gt;
      &lt;fo:list-item-label end-indent="3in"&gt;<a name="co92"></a>&#10103;
        &lt;fo:block text-align="start"&gt;RenderX XSL FO Manual&lt;/fo:block&gt;
      &lt;/fo:list-item-label&gt;
      &lt;fo:list-item-body start-indent="3in"&gt;<a name="co93"></a>&#10104;
        &lt;fo:block text-align="end"&gt;List Example&lt;/fo:block&gt;
      &lt;/fo:list-item-body&gt;
    &lt;/fo:list-item&gt;
  &lt;/fo:list-block&gt;
&lt;/fo:static-content&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co91">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="sgmltag-starttag">&lt;fo:list-block&gt;</code> and <code class="sgmltag-starttag">&lt;fo:list-item&gt;</code> are
                                             block-level elements, and can get margins (including
                                             <code class="sgmltag-attribute">space-before</code>/<code class="sgmltag-attribute">space-after</code> and
                                             indents), keep &amp; break constraints, borders, padding,
                                             and background. Please note that <code class="sgmltag-starttag">&lt;fo:list-item-body&gt;</code>
                                             and <code class="sgmltag-starttag">&lt;fo:list-item-label&gt;</code> aren't considered
                                             blocks in the spec, and cannot have borders or background.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#co92">&#10103;</a> <a href="#co93">&#10104;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Instead of using <code class="function">label-end()</code>/<code class="function">body-start()</code> technique,
                                             you may also specify indents explicitly like in this example.
                                             To use this method, you should know the width of the parent
                                             reference area to avoid overlapping of item labels to item bodies.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Tables"></a>Tables
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  <span class="emphasis"><em>Tables</em></span> in XSL FO resemble HTML ones: they are made of cells grouped
                  into rows; rows are further grouped into row groups &#8212; table
                  header, table footer, and table bodies (one or more). There are also column
                  descriptors. Table model is rather evolved: please refer to the
                  spec for further details. Here, I limit myself to a couple of core
                  examples.
                  
               </p>
               <p>A basic 2&times;2 table:</p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:table border="0.5pt solid black" text-align="center"&gt;
  &lt;fo:table-body&gt;
    &lt;fo:table-row&gt;
      &lt;fo:table-cell padding="6pt" border="0.5pt solid black"&gt;<a name="coA1"></a>&#10102;
        &lt;fo:block&gt; upper left &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
      &lt;fo:table-cell padding="6pt" border="0.5pt solid black"&gt;
        &lt;fo:block&gt; upper right &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
    &lt;/fo:table-row&gt;
    &lt;fo:table-row&gt;
      &lt;fo:table-cell padding="6pt" border="0.5pt solid black"&gt;
        &lt;fo:block&gt; lower left &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
      &lt;fo:table-cell padding="6pt" border="0.5pt solid black"&gt;
        &lt;fo:block&gt; lower right &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
    &lt;/fo:table-row&gt;
  &lt;/fo:table-body&gt;
&lt;/fo:table&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coA1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Table cells can have borders, padding, and background; they cannot
                                             have margins. The table itself may have all attributes a normal block
                                             may have, except for padding.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                  A more complicated example includes explicit column width
                  assignment and cells spanning multiple grid units:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:table border="0.5pt solid black"
          text-align="center"
          border-spacing="3pt"<a name="coB1"></a>&#10102;&gt;
  &lt;fo:table-column column-width="1in"/&gt;
  &lt;fo:table-column column-width="0.5in" number-columns-repeated="2"<a name="coB2"></a>&#10103;/&gt;
  &lt;fo:table-header&gt;<a name="coB3"></a>&#10104;
    &lt;fo:table-row&gt;
      &lt;fo:table-cell padding="6pt"
                     border="1pt solid blue"
                     background-color="silver"
                     number-columns-spanned="3"<a name="coB4"></a>&#10105;&gt;
        &lt;fo:block text-align="center" font-weight="bold"&gt;
          Header
        &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
    &lt;/fo:table-row&gt;
  &lt;/fo:table-header&gt;
  &lt;fo:table-body&gt;
    &lt;fo:table-row&gt;
      &lt;fo:table-cell padding="6pt"
                     border="1pt solid blue"
                     background-color="silver"
                     number-rows-spanned="2"<a name="coB5"></a>&#10106;&gt;
        &lt;fo:block text-align="end" font-weight="bold"&gt;
          Items:
        &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
      &lt;fo:table-cell padding="6pt" border="0.5pt solid black"&gt;
        &lt;fo:block&gt; 1 : 1 &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
      &lt;fo:table-cell padding="6pt" border="0.5pt solid black"&gt;
        &lt;fo:block&gt; 1 : 2 &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
    &lt;/fo:table-row&gt;
    &lt;fo:table-row&gt;<a name="coB6"></a>&#10107;
      &lt;fo:table-cell padding="6pt" border="0.5pt solid black"&gt;
        &lt;fo:block&gt; 2 : 1 &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
      &lt;fo:table-cell padding="6pt" border="0.5pt solid black"&gt;
        &lt;fo:block&gt; 2 : 2 &lt;/fo:block&gt;
      &lt;/fo:table-cell&gt;
    &lt;/fo:table-row&gt;
  &lt;/fo:table-body&gt;
&lt;/fo:table&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coB1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <code class="sgmltag-attribute">border-spacing</code> corresponds to
                                             <code class="sgmltag-attribute">CELLSPACING</code> attribute of the HTML table model.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coB2">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This is a column specifier that sets the width for the second and
                                             the third column. Instead of repeating the same specifier for two
                                             consecutive columns, I have used an <code class="sgmltag-attribute">number-columns-repeated</code>
                                             attribute: it just clones the description the specified number of times.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coB3">&#10104;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             <span class="emphasis"><em>Table header</em></span> is a row group like
                                             <code class="sgmltag-starttag">&lt;fo:table-body&gt;</code>. It is repeated at the top of page
                                             after page breaks unless you specify
                                             <code class="sgmltag-attribute">table-omit-header-at-break</code>=<em class="parameter"><code>"true"</code></em> on
                                             the embracing <code class="sgmltag-starttag">&lt;fo:table&gt;</code>.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coB4">&#10105;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This cell will span three columns horizontally.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coB5">&#10106;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This cell will span two rows vertically.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coB6">&#10107;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This row contains only two cells; the first grid unit
                                             is already occupied by the cell spanning from the
                                             previous row.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Graphics"></a>Graphics
                     </h2>
                  </div>
               </div>
            </div>
            <p>
               There is a special inline element for including graphics
               into XSL FO &#8212; <code class="sgmltag-starttag">&lt;fo:external-graphic&gt;</code>. The source
               image is specified by the <code class="sgmltag-attribute">src</code> attribute whose value
               is a URI. XEP handles HTTP, FTP, <code class="literal">data</code> and filesystem resource locators
               in URIs. An unqualified URI is treated as a path to a file in the
               local file system; if the path is relative, it is calculated from
               the location of the source XSL FO document.
               
            </p>
            <p>Here's an example:</p>
            <div class="informalexample"><pre class="programlisting">
&lt;fo:block&gt;
  This text includes a picture:
  &lt;fo:external-graphic src="url('smile.gif')"<a name="coC1"></a>&#10102;
                       content-height="1em"<a name="coC2"></a>&#10103; content-width="1em"<a name="coC3"></a>&#10104;/&gt;
&lt;/fo:block&gt;
      </pre><div class="calloutlist">
                  <table border="0" summary="Callout list">
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#coC1">&#10102;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          Note the <code class="function">url('&#8230;')</code> function-like wrapper
                                          around the file name: this is required by the XSL 1.0 Recommendation.
                                          (XEP recognizes unwrapped URLs, too).
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#coC2">&#10103;</a> <a href="#coC3">&#10104;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          In this example, the height and the width of the image are
                                          expressed in units relative to the nominal font size. This
                                          is a convenient technique to scale small inlined images
                                          proportionally to the text height.
                                        
                           </p>
                        </td>
                     </tr>
                  </table>
               </div>
            </div>
            <p>
               If you need a block-level graphic, you should wrap the element in
               a <code class="sgmltag-starttag">&lt;fo:block&gt;</code>, like in the example below:
               
            </p>
            <div class="informalexample"><pre class="programlisting">
&lt;fo:block font-weight="bold"
          keep-with-next.within-column="always"&gt;<a name="coD1"></a>&#10102;
  Figure 1: A Smiling Face
&lt;/fo:block&gt;
&lt;fo:block&gt;
    &lt;fo:external-graphic src="url('smile.gif')"
                         content-height="200%" content-width="200%"/&gt;<a name="coD2"></a>&#10103;
&lt;/fo:block&gt;
      </pre><div class="calloutlist">
                  <table border="0" summary="Callout list">
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#coD1">&#10102;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          This property &#8220;glues&#8221; the figure caption
                                          to the figure itself.
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#coD2">&#10103;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          <code class="sgmltag-attribute">content-width</code> and <code class="sgmltag-attribute">content-height</code> expressed as
                                          percents denote scaling the image from its original (intrinsic) size.
                                        
                           </p>
                        </td>
                     </tr>
                  </table>
               </div>
            </div>
            <p>
               It is also possible to create an image directly in the XSL-FO, using
               the embedded SVG feature:
               
            </p>
            <div class="informalexample"><pre class="programlisting">
&lt;fo:block&gt;
  Here is the image of a typical roadsign:
  &lt;fo:instream-foreign-object content-height="1em"&gt;<a name="coCS1"></a>&#10102; 
    &lt;svg:svg xmlns:svg="http://www.w3.org/2000/svg"<a name="coCS2"></a>&#10103;
             height="100" width="100" viewBox="-50 -50 100 100"&gt;
      &lt;svg:circle r="50" style="fill:red; stroke:none"/&gt;
      &lt;svg:rect x="-40" y="-10" width="80" height="20"
                style="fill:white; stroke:none"/&gt;             
    &lt;/svg:svg&gt; 
  &lt;/fo:instream-foreign-object&gt;
&lt;/fo:block&gt;
      </pre><div class="calloutlist">
                  <table border="0" summary="Callout list">
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#coCS1">&#10102;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          Embedded images can be scaled with the same attributes as external ones.
                                        
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a href="#coCS2">&#10103;</a> 
                        </td>
                        <td valign="top" align="left">
                           <p>
                                          SVG elements reside in a separate namespace that has 
                                          to be declared; otherwise, SVG images will not be recognized.
                                        
                           </p>
                        </td>
                     </tr>
                  </table>
               </div>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Advanced"></a>Advanced Features
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Containers"></a>Containers and Reference Orientation
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  	    <code class="sgmltag-starttag">&lt;fo:block-container&gt;</code> objects group blocks in a separate 
                  	    area that can have a different orientation of coordinate axes or writing direction.
                  	    A special <code class="sgmltag-attribute">reference-orientation</code> property sets
                  	    the orientation of the "top" direction for the area. Its value is the rotation angle, measured in degrees:
                  	    <em class="parameter"><code>0</code></em>, <em class="parameter"><code>90</code></em>, <em class="parameter"><code>180</code></em>, <em class="parameter"><code>270</code></em>, <em class="parameter"><code>-90</code></em>, <em class="parameter"><code>-180</code></em>, <em class="parameter"><code>-270</code></em>. 
                  Positive values rotate the coordinate system counterclockwise, and negative ones 
                  turn it clockwise.
                  	  
               </p>
               <p>
                  	    Let us consider a simple example:
                  	  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:block-container width="250pt" height="20pt"
                       border="1pt solid black"
                       reference-orientation="0"&gt;<a name="coR1"></a>&#10102;
  &lt;fo:block text-align="left"&gt;<a name="coR2"></a>&#10103;
	Regular text.
  &lt;/fo:block&gt;
&lt;/fo:block-container&gt;
&lt;fo:block-container width="250pt" height="20pt"
                       border="1pt solid black"
                       reference-orientation="180"&gt;<a name="coR3"></a>&#10104;
  &lt;fo:block text-align="left"&gt;<a name="coR4"></a>&#10105;
	Text shown upside down.
  &lt;/fo:block&gt;
&lt;/fo:block-container&gt;	  
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coR1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This container has a default <code class="sgmltag-attribute">reference-orientation</code>
                                             of 0. Note that the size of the rectangular area occupied by the container 
                                             is explicitly specified.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coR3">&#10104;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             The text in this block should be shown upside down.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coR2">&#10103;</a> <a href="#coR4">&#10105;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                           	Blocks in both containers have <code class="sgmltag-attribute">text-align</code>=<em class="parameter"><code>"left"</code></em>.
                                           	Since "left" is determined with respect to the "top", the text in this block
                                           	should be aligned to the opposite side than in the previous one. 
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                  	    Besides containers, <code class="sgmltag-attribute">reference-orientation</code> property can apply 
                  	    to <code class="sgmltag-starttag">&lt;fo:simple-page-master&gt;</code> and <code class="sgmltag-starttag">&lt;fo:region-*&gt;</code> formatting objects.
                  	    In the following example, I create a page master with a single <code class="sgmltag-starttag">&lt;fo:region-body&gt;</code>
                  	    whose contents is rotated 90&deg; clockwise:
                  	  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
&lt;fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format"&gt;
  &lt;fo:layout-master-set&gt;
    &lt;fo:simple-page-master master-name="my-page"&gt;
      &lt;fo:region-body border="0.25pt solid silver"
                         margin="0.5in"
                         padding="12pt"
                         reference-orientation="-90"/&gt;
    &lt;/fo:simple-page-master&gt;
  &lt;/fo:layout-master-set&gt;
  &lt;fo:page-sequence master-reference="my-page"&gt;
    &lt;fo:flow flow-name="xsl-region-body"&gt;
      &lt;fo:block&gt;
        Text and images on the page
       &lt;fo:external-graphic src="url('smile.gif')"
                               content-height="100%"
                               content-width="100%"/&gt;
      &lt;/fo:block&gt;
      &lt;fo:block-container width="250pt" height="20pt"
                             border="1pt solid black"
                             reference-orientation="180"&gt;<a name="coRB1"></a>&#10102;
        &lt;fo:block&gt;
	  Text flips upside down.
        &lt;/fo:block&gt;
      &lt;/fo:block-container&gt;	  
    &lt;/fo:flow&gt;
  &lt;/fo:page-sequence&gt;
&lt;/fo:root&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coRB1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                              The rotation angle specified by <code class="sgmltag-attribute">reference-orientation</code>
                                              is measured from the orientation of the parent area. In this case, 180&deg; specified
                                              on the <code class="sgmltag-starttag">&lt;fo:block-container&gt;</code> will be added to -90&deg; 
                                              already on the <code class="sgmltag-starttag">&lt;fo:region-body&gt;</code>; the resulting
                                              text rotation will be 90&deg; counterclockwise.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Writing_Mode"></a>Writing Mode and Bidirectionality
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  	  XSL FO has powerful means to deal with non-Western writing systems.
                  	  Lines can be made horizontal or vertical; character can be ordered
                  	  from any side; line stacking order on the page can also be varied.
                  	  To define ordering of characters within lines and stacking direction
                  	  of lines into paragraphs, we use <code class="sgmltag-attribute">writing-mode</code>
                  	  property. It can be specified on <code class="sgmltag-starttag">&lt;fo:simple-page-master&gt;</code>,
                  <code class="sgmltag-starttag">&lt;fo:region-*&gt;</code>, 
                  <code class="sgmltag-starttag">&lt;fo:table&gt;</code>,
                  <code class="sgmltag-starttag">&lt;fo:block-container&gt;</code>,
                  and <code class="sgmltag-starttag">&lt;fo:inline-container&gt;</code> elements.
                  	  Its primary values are:
                  	
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                           	      <span class="property">"lr-tb"</span>: left-to-right, top-to-bottom. This is the default
                           	      writing mode in XSL-FO; it is used by the majority of world languages, including 
                           	      English;
                           	    
                        </p>
                     </li>
                     <li>
                        <p>
                           	      <span class="property">"rl-tb"</span>: right-to-left, top-to-bottom. This mode
                           	      is used in Arabic writing system (adopted by many languages of the Middle
                           	      East), Hebrew, and Syriac alphabets.
                           	    
                        </p>
                     </li>
                     <li>
                        <p>
                           	      <span class="property">"tb-rl"</span>: top-to-bottom, right-to-left. This way of
                           	      writing is widely used for Japanese, but also for Chinese and other
                           	      languages of the East Asia.
                           	    
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="note">
                  <h3 class="title">Note:</h3>
                  <p>
                     	    As of version 4.9, XEP supports only horizontal writing modes:
                     	    <span class="property">"lr-tb"</span> and <span class="property">"rl-tb"</span>.
                     	  
                  </p>
               </div>
               <p>
                  	  <code class="sgmltag-attribute">writing-mode</code> property defines every aspect
                  	  of the document organization: binding edge, column ordering in tables, 
                  	  text alignment in blocks, etc. It also sets the correspondence between 
                  	  relative directions (<span class="property">before</span> &#8211; <span class="property">after</span>
                  	  &#8211; <span class="property">start</span> &#8211; <span class="property">end</span>)and absolutely 
                  	  oriented ones (<span class="property">top</span> &#8211; <span class="property">bottom</span>
                  	  &#8211; <span class="property">left</span> &#8211; <span class="property">right</span>).
                  	
               </p>
               <p>
                  However, internationalization issues are too complex to be described by a
                  single property. In right-to-left writing systems (Arabic and Hebrew),
                  it is not uncommon to include fragments of text written in Latin alphabet;
                  such text progresses left-to-right. The mechanism that permits mixing
                  writing directions within the same fragment of text is called
                  <span class="emphasis"><em>bidirectionality</em></span>, or bidi for short. The Unicode
                  standard defines rules to calculate ordering of characters in 
                  bidirectional text; the respective part of the Unicode, 
                  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.unicode.org/reports/tr9/" target="_top">Annex #9:
                     <em class="citetitle">The Bidirectional Algorithm</em></a>, is adopted
                  by XSL FO.
                  
               </p>
               <p>
                  However, in certain cases the Unicode bidi algorithm
                  is not enough to determine character ordering. For this purpose,
                  XSL defines a special element <code class="sgmltag-starttag">&lt;fo:bidi-override&gt;</code> 
                  that permit to alter the bidirectional behaviour of the whole text or its parts.
                  It has two properties:
                  
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term"><code class="sgmltag-attribute">direction</code></span></dt>
                     <dd>
                        <p>
                           Sets the dominant direction for a span of text. 
                           Possible values are:
                           
                        </p>
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>
                                    	    	    <span class="property">"ltr"</span> &#8212; from left to right;
                                    	          
                                 </p>
                              </li>
                              <li>
                                 <p>
                                    	            <span class="property">rtl</span> from right to left.
                                    	          
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-attribute">unicode-bidi</code></span></dt>
                     <dd>
                        <p>
                           Specifies behaviour of a text span with respect to the Unicode bidi algorithm.
                           Possible values are the following:
                           
                        </p>
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>
                                    	    	    <span class="property">"normal"</span> &#8212; order characters by Unicode bidi;
                                    	          
                                 </p>
                              </li>
                              <li>
                                 <p>
                                    	    	    <span class="property">"embed"</span> &#8212; open a new level of embedding;
                                    	          
                                 </p>
                              </li>
                              <li>
                                 <p>
                                    	    	    <span class="property">"bidi-override"</span> &#8212; ignore directionality of
                                    	    	    the text and arrange characters in the order specified by the
                                    	    	    <code class="sgmltag-attribute">direction</code> property.
                                    	          
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                  </dl>
               </div>
               <p>
                  	    The following example shows two block containers with different writing modes.
                  	    Both contain a mixture of English (left-to-right) and Hebrew (right-to-left) 
                  	    text. The first container has <code class="sgmltag-attribute">writing-mode</code>=<em class="parameter"><code>"lr-tb"</code></em>
                  	    (default): its content will be treated as an English phrase with inclusions of Hebrew words.
                  	    The second container has <code class="sgmltag-attribute">writing-mode</code>=<em class="parameter"><code>"rl-tb"</code></em>, 
                  	    so its content will be considered a Hebrew phrase with some English words in it.
                  	  
               </p>
               <div class="informalexample"><pre class="programlisting">
  &lt;fo:block-container writing-mode="lr-tb"&gt;<a name="coRM1"></a>&#10102;
     &lt;fo:block&gt; The words of Queen Esther,
        &amp;#x5D5;&amp;#x5DB;&amp;#x5D0;&amp;#xFB2A;&amp;#x5E8;
        &amp;#x5D0;&amp;#x5D1;&amp;#x5D3;&amp;#xFB4A;&amp;#x5D9;
        &amp;#x5D0;&amp;#x5D1;&amp;#x5D3;&amp;#xFB4A;&amp;#x5D9;
        "If I perish [in trying to save my people], I perish"
     &lt;/fo:block&gt;
  &lt;/fo:block-container&gt;
  &lt;fo:block-container writing-mode="rl-tb"&gt;<a name="coRM2"></a>&#10103;
     &lt;fo:block&gt; The words of Queen Esther,
        &amp;#x5D5;&amp;#x5DB;&amp;#x5D0;&amp;#xFB2A;&amp;#x5E8;
        &amp;#x5D0;&amp;#x5D1;&amp;#x5D3;&amp;#xFB4A;&amp;#x5D9;
        &amp;#x5D0;&amp;#x5D1;&amp;#x5D3;&amp;#xFB4A;&amp;#x5D9;
        "If I perish [in trying to save my people], I perish"
     &lt;/fo:block&gt;
  &lt;/fo:block-container&gt;
        </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coRM1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                Left-to-right, top-to-bottom writing mode.
                                             
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coRM2">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                Right-to-left, top-to-bottom writing mode.
                                             
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                  In the following small code snippet, <code class="sgmltag-starttag">&lt;fo:bidi-override&gt;</code> formatting object
                  is used to turn English text inside out, writing Latin symbols right-to-left (as if they were Hebrew characters):
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
  &#8230;
  &lt;fo:block&gt;
    &lt;fo:bidi-override unicode-bidi="bidi-override" direction="rtl"&gt;<a name="coBD1"></a>&#10102;
      This text ought to be turned inside out.
    &lt;/fo:bidi-override&gt;
  &lt;/fo:block&gt;
  &#8230;
        </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coBD1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                               <code class="sgmltag-attribute">direction</code> property sets writing direction,
                                               and <code class="sgmltag-attribute">unicode-bidi</code>=<em class="parameter"><code>"bidi-override"</code></em> 
                                               cancels the effects of the Unicode BIDI algorithm, forcing all characters
                                               in the text to go from right to left.
                                             
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Links"></a>Links
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  There are two kinds of links in XSL FO:
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>links to locations inside the document;</p>
                     </li>
                     <li>
                        <p>links to external entities/locations.</p>
                     </li>
                  </ul>
               </div>
               <p>
                  Both are achieved using the same formatting object &#8212;
                  <code class="sgmltag-starttag">&lt;fo:basic-link&gt;</code>. To make an <span class="emphasis"><em>internal link</em></span>, the
                  referenced object must have an <code class="sgmltag-attribute">id</code> attribute that
                  is cited in the <code class="sgmltag-attribute">internal-destination</code> attribute
                  of the link object:
                  
               </p><pre class="programlisting">
&lt;fo:basic-link internal-destination="smiley"
               text-decoration="underline"&gt;Click here&lt;/fo:basic-link&gt;
    </pre><p>
                  An <span class="emphasis"><em>external link</em></span> must have an URI specified in the
                  <code class="sgmltag-attribute">external-destination</code> attribute:
                  
               </p><pre class="programlisting">
&lt;fo:basic-link external-destination="url('http://www.RenderX.com/')"
               text-decoration="underline"
               color="blue"&gt;RenderX Home&lt;/fo:basic-link&gt;
    </pre><p>
                  Unlike HTML, no default formatting is applied to links in XSL FO;
                  you should provide character-level properties on <code class="sgmltag-starttag">&lt;fo:basic-link&gt;</code>
                  to distinguish it from the rest  of the text (in the example above,
                  <code class="sgmltag-attribute">color</code> and <code class="sgmltag-attribute">text-decoration</code>
                  make the link text blue and underlined, as in a browser).
                  
               </p>
               <p>
                  Note the <code class="function">url('&#8230;')</code> notation inside the
                  <code class="sgmltag-attribute">external-destination</code> attribute; this is required by the
                  XSL 1.0 Recommendation. (XEP handles unwrapped URLs, too).
                  
               </p>
               <p>
                  In XEP, URLs starting with explicit <code class="literal">"file:"</code> protocol specification 
                  are rendered as PDF inter-document links. All other links are treated as Internet
                  URIs, and open in a browser.
                  
               </p>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Leaders"></a>Leaders
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  <span class="emphasis"><em>A leader</em></span> is an object used in XSL FO to create horizontal rules,
                  lengthy white spaces, dot-filled tabs etc. Here is an example of a horizontal
                  inline rule used to form a nice separator:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:block text-align="center"&gt;
  &lt;fo:leader leader-length="2in"
             leader-pattern="rule"
             alignment-baseline="middle"<a name="coE1"></a>&#10102;
             rule-thickness="0.5pt" color="black"/&gt;
  &lt;fo:inline font="16pt ZapfDingbats"
             color="#E00000"&gt;&amp;#x274B;<a name="coE2"></a>&#10103;&lt;/fo:inline&gt;
  &lt;fo:leader leader-length="2in"
             leader-pattern="rule"
             alignment-baseline="middle"
             rule-thickness="0.5pt" color="black"/&gt;
&lt;/fo:block&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coE1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This aligns the leader vertically to the middle baseline &#8212;
                                             more or less at the level where strokes of a small x character
                                             cross.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coE2">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This draws a red eight-lobe asterisk. All dingbats should be referenced
                                             by their Unicode values; see XEP documentation for a list of codes
                                             assigned to ZapfDingbats glyphs.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                  See also an example of leader usage in a section about page numbers.
                  
               </p>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Footnotes_Floats"></a>Footnotes and Floats
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  To insert a <span class="emphasis"><em>footnote</em></span> at the bottom of the page,
                  you should use a <code class="sgmltag-starttag">&lt;fo:footnote&gt;</code> formatting object.
                  It contains two formatting objects as its children:
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                           <code class="sgmltag-starttag">&lt;fo:inline&gt;</code> contains an inline content used
                           as a footnote anchor;
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           <code class="sgmltag-starttag">&lt;fo:footnote-body&gt;</code> object stores the text of the
                           footnote body; its content will be placed at the bottom of the page.
                           
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                  <span class="emphasis"><em>Lists</em></span> are often used to format footnote bodies.
                  The example below shows a typical case:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:block&gt;
  This text contains a footnote&lt;fo:footnote&gt;<a name="coF1"></a>&#10102;
    &lt;fo:inline baseline-shift="super"
               font-size="smaller"&gt;(1)&lt;/fo:inline&gt;
    &lt;fo:footnote-body&gt;
      &lt;fo:list-block provisional-label-separation="0pt"
                     provisional-distance-between-starts="18pt"
                     space-after.optimum="6pt"<a name="coF2"></a>&#10103;&gt;
        &lt;fo:list-item&gt;
          &lt;fo:list-item-label end-indent="label-end()"&gt;
            &lt;fo:block&gt;(1)&lt;/fo:block&gt;
          &lt;/fo:list-item-label&gt;
          &lt;fo:list-item-body start-indent="body-start()"&gt;
            &lt;fo:block&gt;Footnote text&lt;/fo:block&gt;
          &lt;/fo:list-item-body&gt;
        &lt;/fo:list-item&gt;
      &lt;/fo:list-block&gt;
    &lt;/fo:footnote-body&gt;
  &lt;/fo:footnote&gt;
  after the word "footnote".
&lt;/fo:block&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coF1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Footnote opening tag is placed immediately after the word
                                             &#8220;footnote&#8221;; breaking a line here would cause
                                             the footnote citation to detach from the word.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coF2">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This serves to separate adjacent footnote bodies.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                  Normally, footnotes are divided from the rest of the text by a
                  <span class="emphasis"><em>separator</em></span>. Separators are created in a special
                  region named <code class="literal">xsl-footnote-separator</code>. You can
                  insert content into it using a <code class="sgmltag-starttag">&lt;fo:static-content&gt;</code>
                  element. The example below shows a separator consisting of a
                  solid line:
                  
               </p><pre class="programlisting">
&lt;fo:page-sequence&gt;
  &lt;fo:static-content flow-name="xsl-footnote-separator"&gt;
    &lt;fo:block&gt;
      &lt;fo:leader leader-pattern="rule"
                 leader-length="100%"
                 rule-style="solid"
                 rule-thickness="0.5pt"/&gt;
    &lt;/fo:block&gt;
  &lt;/fo:static-content&gt;
  &#8230;
  &#8230;
  &#8230;
    </pre><p>
                  <span class="emphasis"><em>Floats</em></span> are similar to footnotes: they define a block
                  that drifts to the top/left/right side of the page while the
                  text flows around it. A typical use for floats is to put a picture,
                  a table, etc. aside so that it does not disrupt the flow of the text.
                  Here is an example of a top-float:
                  
               </p><pre class="programlisting">
&lt;fo:block&gt;
  This text includes a floating picture.
  &lt;fo:float float="before"&gt;
    &lt;fo:block text-align="center"
              border="1pt solid gray"
              font="bold italic 9pt Helvetica"&gt;
      &lt;fo:block&gt;
        &lt;fo:external-graphic src="url('smile.gif')"/&gt;
      &lt;/fo:block&gt;
      &lt;fo:block&gt;
        Fig. 1: A Smiling Face
      &lt;/fo:block&gt;
    &lt;/fo:block&gt;
  &lt;/fo:float&gt;
  This text follows the float anchor.
&lt;/fo:block&gt;
    </pre><div class="note">
                  <h3 class="title">Note:</h3>
                  <p>
                     Due to implementation restrictions of XEP 4.9, top floats (<code class="sgmltag-attribute">float</code>=<em class="parameter"><code>"before"</code></em>)
                     appear on the top of the column <span class="emphasis"><em>next to the current</em></span> one. 
                     For details, refer to <em class="citetitle">XSL Formatting Objects in XEP 4.9</em>
                     (<code class="filename">doc/spec.pdf</code> in the XEP package).
                     
                  </p>
               </div>
               <p>
                  	  The next example shows how to create a dropcap using a side float:
                  	
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:block intrusion-displace="line"<a name="coSF1"></a>&#10102;&gt;
  &lt;fo:float float="start"<a name="coSF2"></a>&#10103;&gt; 
    &lt;fo:block font="bold 50pt/38pt<a name="coSF3"></a>&#10104; Helvetica" color="red"&gt;T&lt;/fo:block&gt;
  &lt;/fo:float&gt;
   his text starts with a big red letter T that hangs beneath the
   baseline. Few initial lines of text are shortened to make room
   for the dropcap.
&lt;/fo:block&gt;
    </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coSF1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                           Property <code class="sgmltag-attribute">intrusion-displace</code> controls interaction
                                           of formatting objects with side floats. <em class="parameter"><code>"line"</code></em> 
                                           is the default value for <code class="sgmltag-starttag">&lt;fo:block&gt;</code> (in this case,
                                           it could be omitted): it forces lines of text to shrink, leaving 
                                           room for the float.
                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coSF2">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                           As in many places before, <em class="parameter"><code>"start"</code></em> means
                                           &#8220;start of line&#8221;; in the Western writing mode,
                                           this float will drift to the left.
                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coSF3">&#10104;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                           Notice that in the <code class="sgmltag-attribute">font</code> shorthand attribute, 
                                           the <span class="property">line-height</span> is set to a smaller value 
                                           than the <span class="property">font-size</span>  (38 pt vs. 50 pt). 
                                           This serves to remove blank area (also known as <span class="emphasis"><em>leading</em></span>) 
                                           before and after the character on the line.
                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Page_Numbering"></a>Page Numbering and Page Number References
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  To insert the <span class="emphasis"><em>current page number</em></span>, use
                  <code class="sgmltag-starttag">&lt;fo:page-number&gt;</code> element:
                  
               </p><pre class="programlisting">
&lt;fo:static-content flow-name="xsl-region-before"&gt;
  &lt;fo:block text-align="end"&gt;Page &lt;fo:page-number/&gt;&lt;/fo:block&gt;
&lt;/fo:static-content&gt;
    </pre><p>
                  To insert a reference to a page where a certain element
                  resides, that element must have a unique <code class="sgmltag-attribute">id</code> property.
                  Then you can reference it by a <code class="sgmltag-starttag">&lt;fo:page-number-citation&gt;</code>
                  element:
                  
               </p><pre class="programlisting">
&lt;fo:external-graphic id="smiley" src="url('smile.gif')"/&gt;
  &#8230;
  &#8230;
  &#8230;
As shown on the "Smiling Face" diagram
(see page &lt;fo:page-number-citation ref-id="smiley"/&gt;), &#8230;
    </pre><p>
                  Page number citation can be used to obtain the total number of
                  pages in the document: just place an empty block at the
                  end of the text and refer to its page number, like in the example
                  below:
                  
               </p><pre class="programlisting">
&lt;fo:static-content flow-name="xsl-region-before"&gt;
  &lt;fo:block text-align="end"&gt;
    Page &lt;fo:page-number/&gt;
    of &lt;fo:page-number-citation ref-id="terminator"/&gt;
  &lt;/fo:block&gt;
&lt;/fo:static-content&gt;
&lt;fo:flow&gt;
  &#8230;
  &#8230;
  &#8230;
  &lt;fo:block id="terminator"/&gt;
&lt;/fo:flow&gt;
    </pre><p>
                  Another important use of page number citations is to create
                  tables of contents and indices. The example below shows a
                  typical TOC entry in XEP:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:block text-align-last="justify"<a name="coG1"></a>&#10102;&gt;
  1. Introduction
  &lt;fo:leader leader-pattern="dots"/&gt;<a name="coG2"></a>&#10103;
  &lt;fo:page-number-citation ref-id="intro"/&gt;
&lt;/fo:block&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coG1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             The <code class="sgmltag-attribute">text-align-last</code> attribute makes the last line
                                             extend up to the right edge of the text. If a
                                             <code class="sgmltag-starttag">&lt;fo:leader&gt;</code> element is present on the line,
                                             it will grow so as to absorb all the remaining free space on the line
                                             (but not more that its <span class="property">leader-length.maximum</span>).
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coG2">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This element creates a dotted fill. The default value for
                                             <span class="property">leader-length.maximum</span> is <em class="parameter"><code>"100%"</code></em> (i.e.
                                             equal to the width of the surrounding block); that's why
                                             we need not explicitly specify a length here.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Markers"></a>Markers
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  <span class="emphasis"><em>Markers</em></span> are used to change the contents of a side region
                  according to the contents of the body region. A typical task performed
                  with markers is to create <span class="emphasis"><em>running headers</em></span> &#8212;
                  to put the division title at the header of the page.
                  
               </p>
               <p>
                  Actual use of markers involves two formatting objects:
                  
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;fo:marker&gt;</code></span></dt>
                     <dd>
                        <p>
                           creates a fragment of the document
                           tree and associates it with a span of text in the flow;
                           
                        </p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;fo:retrieve-marker&gt;</code></span></dt>
                     <dd>
                        <p>
                           picks up a fragment created by an <code class="sgmltag-starttag">&lt;fo:marker&gt;</code>
                           and pastes it into a side region.
                           
                        </p>
                     </dd>
                  </dl>
               </div>
               <p>
                  The contents of a<code class="sgmltag-starttag">&lt;fo:marker&gt;</code> can be any block-level or inline-level
                  formatting objects. <code class="sgmltag-starttag">&lt;fo:marker&gt;</code> elements (one or more) can
                  be the initial children of any formatting object that produces areas
                  (<code class="sgmltag-starttag">&lt;fo:block&gt;</code>, <code class="sgmltag-starttag">&lt;fo:inline&gt;</code>, etc., including
                  <code class="sgmltag-starttag">&lt;fo:wrapper&gt;</code>). A <code class="sgmltag-starttag">&lt;fo:marker&gt;</code> can appear inside
                  <code class="sgmltag-starttag">&lt;fo:flow&gt;</code> only. It possesses an only attribute &#8212;
                  <code class="sgmltag-attribute">marker-class-name</code>, used as a key when retrieving it.
                  
               </p>
               <p>
                  <code class="sgmltag-starttag">&lt;fo:retrieve-marker&gt;</code> is an empty element that can occur
                  inside <code class="sgmltag-starttag">&lt;fo:static-content&gt;</code> only. When the formatter
                  builds a page instance, it replaces occurrences of
                  <code class="sgmltag-starttag">&lt;fo:retrieve-markers&gt;</code> by matching <code class="sgmltag-starttag">&lt;fo:markers&gt;</code>
                  found in the text flow.
                  
               </p>
               <p>
                  Here is a basic example of using markers:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:static-content flow-name="xsl-region-before"&gt;
  &lt;fo:block text-align="center"&gt;
    &lt;fo:retrieve-marker retrieve-class-name="division"/&gt;
  &lt;/fo:block&gt;
&lt;/fo:static-content&gt;
&#8230;
&#8230;
&#8230;
&lt;fo:block&gt;<a name="coH1"></a>&#10102;
  &lt;fo:marker marker-class-name="division"&gt;<a name="coH2"></a>&#10103;
    Introduction
  &lt;/fo:marker&gt;
  &lt;fo:block font-weight="bold" text-align="center"&gt;
    1. Introduction
  &lt;/fo:block&gt;
  &lt;fo:block text-indent="0.5in"&gt;
    Let me introduce you to something &#8230;
    &#8230; &#8230; &#8230;
  &lt;/fo:block&gt;
&lt;/fo:block&gt;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coH1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             This block should reside somewhere inside <code class="sgmltag-starttag">&lt;fo:flow&gt;</code>.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coH2">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Remember that <code class="sgmltag-starttag">&lt;fo:markers&gt;</code> should always be
                                             initial children of their parent elements.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Extensions"></a>RenderX Extensions
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Document_Info"></a>Document Info
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  PDF documents can have a number of information fields
                  associated to them; these are displayed in Acrobat Reader
                  when you choose <span class="guimenuitem">Document Info / General</span> from the
                  <span class="guimenu">File</span> menu. Standard fields are <span class="property">&#8216;Author&#8217;</span>,
                  <span class="property">&#8216;Title&#8217;</span>, <span class="property">&#8216;Creator&#8217;</span>,
                  <span class="property">&#8216;Subject&#8217;</span>, and <span class="property">&#8216;Keywords&#8217;</span>.
                  XSL FO provides no means to set these values.
                  
               </p>
               <p>
                  XEP 4.9 provides a mechanism to set these fields from
                  within the XSL FO document, using additional formatting objects.
                  To trace a clear distinction between objects comprised
                  in the XSL 1.0 Recommendation and those added by RenderX,
                  the namespace mechanism is used: any and all additional elements
                  or properties will have a different namespace prefix, associated
                  to another namespace:
                  
               </p>
               <p><code class="sgmltag-attribute">xmlns:rx</code>=<em class="parameter"><code>"http://www.renderx.com/XSL/Extensions"</code></em></p>
               <p>
                  We need two extension elements to express document information fields:
                  <code class="sgmltag-starttag">&lt;rx:meta-info&gt;</code> and <code class="sgmltag-starttag">&lt;rx:meta-field&gt;</code>.
                  
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;rx:meta-info&gt;</code></span></dt>
                     <dd>
                        <p>
                           This element is merely a container for one or more
                           <code class="sgmltag-starttag">&lt;rx:meta-field&gt;</code> elements. It should be
                           the first child of <code class="sgmltag-starttag">&lt;fo:root&gt;</code>.
                           
                        </p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;rx:meta-field&gt;</code></span></dt>
                     <dd>
                        <p>
                           This element specifies a single name/value pair.
                           It has two mandatory attributes: <code class="sgmltag-attribute">name</code>
                           and <code class="sgmltag-attribute">value</code>. Current implementation of
                           the PDF and PostScript generators recognizes four
                           possible values for <code class="sgmltag-attribute">name</code>:
                           
                        </p>
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>
                                    <code class="sgmltag-attribute">name</code>=<em class="parameter"><code>"author"</code></em> fills the
                                    &#8216;Author&#8217; field in the resulting PDF
                                    file with a string specified by the <code class="sgmltag-attribute">value</code>
                                    property;
                                    
                                 </p>
                              </li>
                              <li>
                                 <p>
                                    <code class="sgmltag-attribute">name</code>=<em class="parameter"><code>"title"</code></em> fills the
                                    &#8216;Title&#8217; field;
                                    
                                 </p>
                              </li>
                              <li>
                                 <p>
                                    <code class="sgmltag-attribute">name</code>=<em class="parameter"><code>"subject"</code></em> fills the
                                    &#8216;Subject&#8217; field;
                                    
                                 </p>
                              </li>
                              <li>
                                 <p>
                                    <code class="sgmltag-attribute">name</code>=<em class="parameter"><code>"keywords"</code></em> fills the
                                    &#8216;Keywords&#8217; field.
                                    
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>
                           All other values for <code class="sgmltag-attribute">name</code> are ignored. The
                           &#8216;Creator&#8217; field in the PDF file is set to the
                           name of the application that created the document &#8212;
                           <code class="literal">"XEP 4.9"</code>. There is no method to control
                           it from the source file.
                           
                        </p>
                     </dd>
                  </dl>
               </div>
               <p>
                  Let's see a code example containing this extension:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
&lt;fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format"
         xmlns:rx="http://www.renderx.com/XSL/Extensions"<a name="coI1"></a>&#10102;&gt;
  &lt;rx:meta-info&gt;<a name="coI2"></a>&#10103;
    &lt;rx:meta-field name="author" value="John Doe"/&gt;
    &lt;rx:meta-field name="title" value="Sample Document"/&gt;
    &lt;rx:meta-field name="subject" value="PDF Generation Test"/&gt;
    &lt;rx:meta-field name="keywords" value="XSL, PDF, FO Extensions"/&gt;
  &lt;/rx:meta-info&gt;
  &lt;fo:layout-master-set&gt;
    &#8230;
    &#8230;
    &#8230;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coI1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Here's the namespace declaration for RenderX
                                             additional elements. It is obligatory if you use extensions.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coI2">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Note the different namespace prefix.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="PDF_Bookmarks"></a>PDF Bookmarks
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  PDF documents can have an associated outline of their structure,
                  commonly referred to as <span class="emphasis"><em>bookmarks</em></span>. Being
                  specific to a particular output format, bookmarks aren't
                  covered by the XSL 1.0 Recommendation. XEP 4.9
                  implements three extension elements that enable bookmarks
                  in PDF output:
                  
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;rx:outline&gt;</code></span></dt>
                     <dd>
                        <p>
                           Top-level element of the document outline tree.
                           It should be located before any <code class="sgmltag-starttag">&lt;fo:page-sequence&gt;</code>
                           elements, but after <code class="sgmltag-starttag">&lt;fo:layout-master-set&gt;</code>
                           and <code class="sgmltag-starttag">&lt;fo:declarations&gt;</code> (if present). Contains
                           one or more <code class="sgmltag-starttag">&lt;rx:bookmark&gt;</code> elements.
                           
                        </p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;rx:bookmark&gt;</code></span></dt>
                     <dd>
                        <p>
                           This element holds information about a single bookmark.
                           It contains a mandatory <code class="sgmltag-starttag">&lt;rx:bookmark-label&gt;</code>
                           element as its first child. Bookmark destination is expressed
                           either by <code class="sgmltag-attribute">internal-destination</code> property (for internal
                           navigation), or by <code class="sgmltag-attribute">external-destination</code>
                           (for extra-document links).
                           
                        </p>
                        <p>
                           This element can also contain nested
                           <code class="sgmltag-starttag">&lt;rx:bookmark&gt;</code> elements that produce
                           subordinate bookmarks.
                           
                        </p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;rx:bookmark-label&gt;</code></span></dt>
                     <dd>
                        <p>
                           This element contains text of a bookmark label;
                           it must be the first child of its parent
                           <code class="sgmltag-starttag">&lt;fo:bookmark&gt;</code>. Contents of this element
                           is plain text.
                           
                        </p>
                     </dd>
                  </dl>
               </div>
               <p>
                  Shown below is a typical markup of bookmarks for
                  a document consisting of two chapters, each of them
                  having two subchapters:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
    &#8230;
    &#8230;
    &#8230;
  &lt;/fo:layout-master-set&gt;
  &lt;rx:outline&gt;
    &lt;rx:bookmark internal-destination="chap_1"&gt;<a name="coJ1"></a>&#10102;
      &lt;rx:bookmark-label&gt;Chapter 1&lt;/rx:bookmark-label&gt;
      &lt;rx:bookmark internal-destination="subchap_1_1"&gt;<a name="coJ2"></a>&#10103;
        &lt;rx:bookmark-label&gt;Subchapter 1.1&lt;/rx:bookmark-label&gt;
      &lt;/rx:bookmark&gt;
      &lt;rx:bookmark internal-destination="subchap_1_2"&gt;<a name="coJ3"></a>&#10104;
        &lt;rx:bookmark-label&gt;Subchapter 1.2&lt;/rx:bookmark-label&gt;
      &lt;/rx:bookmark&gt;
    &lt;/rx:bookmark&gt;
    &lt;rx:bookmark internal-destination="chap_2"&gt;<a name="coJ4"></a>&#10105;
      &lt;rx:bookmark-label&gt;Chapter 2&lt;/rx:bookmark-label&gt;
      &lt;rx:bookmark internal-destination="subchap_2_1"&gt;
        &lt;rx:bookmark-label&gt;Subchapter 2.1&lt;/rx:bookmark-label&gt;
      &lt;/rx:bookmark&gt;
      &lt;rx:bookmark internal-destination="subchap_2_2"&gt;
        &lt;rx:bookmark-label&gt;Subchapter 2.2&lt;/rx:bookmark-label&gt;
      &lt;/rx:bookmark&gt;
    &lt;/rx:bookmark&gt;
  &lt;/rx:outline&gt;
  &lt;fo:page-sequence master-reference="page"&gt;<a name="coJ5"></a>&#10106;
    &#8230;
    &#8230;
    &#8230;
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coJ1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Bookmark for first chapter.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coJ2">&#10103;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Bookmark for first subchapter. Note that is nested into the bookmark
                                             for chapter. In Acrobat Reader, the chapter bookmark will be shown as a parent
                                             of the subchapter one.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coJ3">&#10104;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                           Bookmark for second subchapter of the first chapter.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coJ4">&#10105;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Bookmark for second chapter.
                                           
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coJ5">&#10106;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             Remember that <code class="sgmltag-starttag">&lt;rx:outline&gt;</code> should be located
                                             immediately before the first page sequence.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Indexes"></a>Indexes
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  Building page number lists for back-of-the-book indexes is a common 
                  task. It is relatively easy to collect a list of references to 
                  locations of index terms in the text; but then, to turn it into 
                  a real index entry, one should exclude repeated page numbers 
                  and merge adjacent numbers into ranges. Neither of these two 
                  operations can be done by pure XSLT/XSL-FO means. In this situation, 
                  introducing an extension looks inevitable.
                  
               </p>
               <p>
                  The task of building an index can be split in two fairly independent
                  subtasks:
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                           mark up occurrences of index terms in the main text;
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           specify composition and formatting of page number lists
                           in the index.
                           
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                  For the first task, XEP introduces a special extension attribute:
                  <code class="sgmltag-attribute">rx:key</code>. It can be specified on any element 
                  that can carry an <code class="sgmltag-attribute">id</code>; unlike the latter,
                  it need not be unique across the document. Its value is used 
                  as a key to select elements for the page number list.
                  
               </p>
               <p>
                  If the element bearing <code class="sgmltag-attribute">rx:key</code> completely fits
                  onto one page, it will be represented as a single page number
                  in the page number list. If it spans multiple pages, its entry
                  in the page number list will be formatted as a range from the first
                  to the last of the spanned pages.
                  
               </p>
               <p>
                  There is also a mechanism to specify ranges explicitly. Two
                  extension elements serve for the purpose: 
                  
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;rx:begin-index-range&gt;</code></span></dt>
                     <dd>
                        <p>
                           Starts a range. Has two attributes, both required: 
                           
                        </p>
                        <div class="variablelist">
                           <dl>
                              <dt><span class="term"><code class="sgmltag-attribute">id</code></span></dt>
                              <dd>
                                 <p>a unique identifier used to establish coupling;</p>
                              </dd>
                              <dt><span class="term"><code class="sgmltag-attribute">rx:key</code></span></dt>
                              <dd>
                                 <p>index key used to select the range into a page number list.</p>
                              </dd>
                           </dl>
                        </div>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-starttag">&lt;rx:end-index-range&gt;</code></span></dt>
                     <dd>
                        <p>
                           Ends a range. Has one attribute, required: 
                           
                        </p>
                        <div class="variablelist">
                           <dl>
                              <dt><span class="term"><code class="sgmltag-attribute">ref-id</code></span></dt>
                              <dd>
                                 <p>a reference to a <code class="sgmltag-starttag">&lt;rx:begin-index-range&gt;</code> that started the range.
                                 </p>
                              </dd>
                           </dl>
                        </div>
                     </dd>
                  </dl>
               </div>
               <p>
                  These two elements always form a pair:
                  <code class="sgmltag-starttag">&lt;rx:begin-index-range&gt;</code> is required to have 
                  an <code class="sgmltag-attribute">id</code> attribute, and <code class="sgmltag-starttag">&lt;rx:end-index-range&gt;</code> 
                  should have a <code class="sgmltag-attribute">ref-id</code> with the same value.
                  In the page number list, the pair is represented by a range from 
                  the page where <code class="sgmltag-starttag">&lt;rx:begin-index-range&gt;</code> is located 
                  to the page where its matching <code class="sgmltag-starttag">&lt;rx:end-index-range&gt;</code>
                  resides. These elements may be located anywhere inside
                  <code class="sgmltag-starttag">&lt;fo:flow&gt;</code>: there are no constraints on their
                  nesting with respect to other elements.
                  
               </p>
               <p>
                  The actual index entry is created by another extension element,
                  <code class="sgmltag-starttag">&lt;rx:page-index&gt;</code>. It picks elements from the text
                  by their <code class="sgmltag-attribute">rx:key</code> properties, and produces 
                  a sorted list of unique page numbers. Items in the list are 
                  separated by an intercalary text, specified by the 
                  <code class="sgmltag-attribute">list-separator</code> property; default 
                  is comma+space (<code class="literal">", "</code>).
                  
               </p>
               <p>
                  <code class="sgmltag-starttag">&lt;rx:page-index&gt;</code> should contain one or more
                  <code class="sgmltag-starttag">&lt;rx:index-item&gt;</code> elements as children. Each
                  <code class="sgmltag-starttag">&lt;rx:index-item&gt;</code> has a required <code class="sgmltag-attribute">ref-key</code>
                  attribute, and selects elements that have an <code class="sgmltag-attribute">rx:key</code>
                  with the same value. 
                  
               </p>
               <div class="note">
                  <h3 class="title">Note:</h3>
                  <p>
                     In XEP 4.9, <code class="sgmltag-starttag">&lt;rx:index-item&gt;</code> only searches elements
                     preceding it in the document; no forward references are implemented.
                     This limitation is likely to persist in future versions of XEP.
                     
                  </p>
               </div>
               <p>    
                  A basic entry in an index will look like this:
                  
               </p><pre class="programlisting">
&lt;fo:inline rx:key="key.elephant"&gt;Elephants&lt;/fo:inline&gt; live in Africa. &#8230;
&lt;fo:inline rx:key="key.elephant"&gt;African elephants&lt;/fo:inline&gt; have big ears &#8230;
&#8230;
&lt;fo:block text-align="center" font="bold 16pt Futura"&gt;INDEX&lt;/fo:block&gt;
&lt;fo:block&gt;
    Elephants &lt;rx:page-index&gt;
                   &lt;rx:index-item ref-key="key.elephant"/&gt;
              &lt;/rx:page-index&gt;
&lt;/fo:block&gt;  
      </pre><p> 
                  There are more attributes of <code class="sgmltag-starttag">&lt;rx:index-item&gt;</code> 
                  to control the look of the index entry:
                  
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term"><code class="sgmltag-attribute">range-separator</code></span></dt>
                     <dd>
                        <p>
                           String used to separate page numbers that form a continuous range. 
                           Default is en dash: <em class="parameter"><code>"&#8211;"</code></em> (<code class="literal">U+2013</code>).
                           
                        </p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-attribute">merge-subsequent-page-numbers</code></span></dt>
                     <dd>
                        <p>
                           Controls whether sequences of adjacent page numbers should 
                           be merged into ranges. Default is <em class="parameter"><code>"false"</code></em>.
                           
                        </p>
                     </dd>
                     <dt><span class="term"><code class="sgmltag-attribute">link-back</code></span></dt>
                     <dd>
                        <p>
                           If set to <em class="parameter"><code>"true"</code></em>, page numbers are formatted
                           as hyperlinks back to the location of their correspondent index 
                           terms. Default is <em class="parameter"><code>"false"</code></em>.
                           
                        </p>
                     </dd>
                  </dl>
               </div>
               <p>
                  Besides that, <code class="sgmltag-starttag">&lt;rx:index-item&gt;</code> can bear additional
                  inline properties, applied individually to each page number
                  generated from this element. This gives a possibility to differentiate
                  presentation styles across the list, e.g. make references to
                  primary definitions bold. The following example illustrates it:
                  
               </p>
               <div class="informalexample"><pre class="programlisting">
&lt;fo:inline rx:key="key.elephant"&gt;Elephants&lt;/fo:inline&gt; live 
                                              in Africa. &#8230;
&lt;fo:inline rx:key="key.elephant.primary"&gt;Elephant&lt;/fo:inline&gt; is 
                                              a quadruped mammal. &#8230;
&lt;fo:inline rx:key="key.elephant"&gt;African elephants&lt;/fo:inline&gt; have big
                                              ears &#8230;
&#8230;
&lt;fo:block text-align="center" font="bold 16pt Futura"&gt;INDEX&lt;/fo:block&gt;
&lt;fo:block&gt;
    Elephants &lt;rx:page-index&gt;
                   &lt;rx:index-item ref-key="key.elephant.primary"
                                  font-weight="bold"
                                  link-back="true"/&gt;<a name="coPI1"></a>&#10102;
                   &lt;rx:index-item ref-key="key.elephant"/&gt;
              &lt;/rx:page-index&gt;
&lt;/fo:block&gt;  
      </pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left"><a href="#coPI1">&#10102;</a> 
                           </td>
                           <td valign="top" align="left">
                              <p>
                                             When duplicates are removed, initial <code class="sgmltag-starttag">&lt;rx:index-item&gt;</code> entries
                                             take precedence. Therefore, references to primary <code class="sgmltag-attribute">rx:key</code>s
                                             should be placed first inside <code class="sgmltag-starttag">&lt;rx:page-index&gt;</code>.
                                           
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="Flow_Sections"></a>Flow Sections
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  <code class="sgmltag-starttag">&lt;rx:flow-section&gt;</code> is a generalization of
                  a <code class="sgmltag-starttag">&lt;fo:block&gt;</code> with <code class="sgmltag-attribute">span</code>=<em class="parameter"><code>"all"</code></em>
                  attribute: it changes the column count for a part of 
                  <code class="sgmltag-starttag">&lt;fo:flow&gt;</code>. Unlike the case of 
                  <code class="sgmltag-attribute">span</code>=<em class="parameter"><code>"all"</code></em>, the number of columns
                  inside <code class="sgmltag-starttag">&lt;rx:flow-section&gt;</code> can be
                  set to any value. 
                  
               </p>
               <p> 
                  The syntax for this extension is straightforward:
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                           <code class="sgmltag-starttag">&lt;rx:flow-section&gt;</code> may only occur as a direct child
                           of <code class="sgmltag-starttag">&lt;fo:flow&gt;</code>;
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           only block-level elements can be descendants of an <code class="sgmltag-starttag">&lt;rx:flow-section&gt;</code>;
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           <code class="sgmltag-starttag">&lt;rx:flow-section&gt;</code> can take <code class="sgmltag-attribute">column-count</code>
                           and <code class="sgmltag-attribute">column-gap</code> attributes to control the number
                           of columns and the separation between them. Columns in a <code class="sgmltag-starttag">&lt;rx:flow-section&gt;</code>
                           are always balanced.
                           
                        </p>
                     </li>
                  </ul>
               </div>
               <p>       
                  Here is a short example. A text is located on a two-column page; it starts
                  with a title that spans all columns, and then continues with an abstract
                  formatted into three columns. After the abstract, the text turns back to
                  its primordial two-column state.
                  
               </p><pre class="programlisting">
&lt;fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" 
         xmlns:rx="http://www.renderx.com/XSL/Extensions"&gt;
  &lt;fo:layout-master-set&gt;
    &lt;fo:simple-page-master&gt;
      &lt;fo:region-body margin="1in" column-count="2"/&gt;
    &lt;/fo:simple-page-master&gt;
  &lt;/fo:layout-master-set&gt;
  &lt;fo:page-sequence master-reference="xsl-region-body"&gt;
    &lt;fo:flow flow-name="xsl-region-body"&gt;
      &lt;fo:block font-size="16pt" span="all"&gt;TITLE&lt;/fo:block&gt; 
      &lt;rx:flow-section column-count="3" column-gap="18pt"&gt; 
      	&lt;fo:block font-size="10pt"&gt;
          Abstract occupies three columns &#8230; 
        &lt;/fo:block&gt;
      &lt;/rx:flow-section&gt;
      &lt;fo:block&gt;
        Normal text continues in two columns as specified in the page master &#8230;
      </pre></div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="Conclusion"></a>Conclusion
                     </h2>
                  </div>
               </div>
            </div>
            <p>
               Congratulations! If you have read this far and understood how
               the above examples work, you are prepared to write your own
               XSL FO stylesheets. You can find more examples of XSL FO usage
               in the <span class="emphasis"><em>RenderX Test Suite</em></span>, available at
               <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.renderx.com/testcases.html" target="_top">http://www.renderx.com/testcases.html</a>.
               There, you can find several dozens of test documents that illustrate
               and test virtually every aspect of XEP's functionality. Sample
               stylesheets for XSL FO are also available from
               <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.renderx.com" target="_top">RenderX site</a>.
               
            </p>
         </div>
      </div>
   </body>
</html>