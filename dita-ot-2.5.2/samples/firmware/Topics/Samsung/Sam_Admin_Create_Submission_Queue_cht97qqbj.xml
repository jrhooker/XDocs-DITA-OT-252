<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA 1.2 Topic//EN" "/SysSchema/dita/dtd/technicalContent/dtd/topic.dtd">
<topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" base="Princeton" id="Admin_Create_Submission_Queue_cht97qqbj" xml:lang="en-US">
  <title>Admin Create Submission Queue</title>

  <body>
    <p>When the PCIe Manager sends a CreateAdminSubQReq,
    the Admin Command Manager checks to ensure that the Queue ID is valid. If
    the Queue ID is not valid or has already been enabled, an invalid queue ID
    error code is returned via the CreateAdminSubQCpl message. If a valid
    Queue ID is specified, the queue size is programmed into the SIZE field of
    the CAR_SQExCTL. The base address of the Submission Queue is programmed
    into CAR_SQExLBASE and CAR_SQExUBASE. The CAR_SQExPCIECTL has already been
    programmed by the PCIe Manager based on information captured during PCIe
    enumeration, please refer to <xref href="../Device_Controller_Initialization_vhsg9zajw.xml#Device_Controller_Initialization_vhsg9zajw/Device_Enumeration_Initialization_xhsg9zajw"/>.
    Once the above setup has been completed, the CAR_SQExCTL.EN can finally be
    enabled.</p>

    <p>When a Submission Queue to Completion Queue mapping
    is created, a QueueMapCreateReq is sent to all the Data Managers. Each of
    the Data Managers will respond with a QueueMapCreateCpl message. Once all
    of the Data Managers have responded, a CreateAdminSubQCpl is returned to
    the PCIe Manager.</p>

    <p>For more information on the PCIe Manager and a flow
    diagram, refer to <xref href="../Enable_NVMe_CC.EN_1__1rhsg9zakc.xml#Enable_NVMe_CC.EN_1__1rhsg9zakc/Create_Admin_Submission_Completion_Queue_1shsg9zakc"/>
    on page 23. For more information on the Data Manager, refer to <xref href="../NVM_Express_Admin_Command_Processing_cpht7esfg3.xml#NVM_Express_Admin_Command_Processing_cpht7esfg3/QueueMapCreateReq_cqht7esfg3"/>.</p>
  </body>
</topic>