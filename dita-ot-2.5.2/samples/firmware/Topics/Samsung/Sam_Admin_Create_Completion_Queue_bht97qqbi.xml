<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA 1.2 Topic//EN" "/SysSchema/dita/dtd/technicalContent/dtd/topic.dtd">
<topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" base="Princeton" id="Admin_Create_Completion_Queue_bht97qqbi" xml:lang="en-US">
  <title>Admin Create Completion Queue</title>

  <body>
    <p>A Completion Queue must be created prior to the
    Submission Queue. When the PCIe Manager sends a CreateAdminCplQReq, the
    Admin Command Manager checks to ensure that the Queue ID is valid. If the
    Queue ID is not valid or has already been created, an invalid queue ID
    error code is returned via the CreateAdminCplQCpl message. If a valid
    Queue ID is specified, the queue size and interrupt vector are programmed
    into the SIZE and INTVEC fields of the CAR_CQExCTL. The base address of
    the Completion Queue is programmed into CAR_CQExLBASE and CAR_CQExUBASE.
    The interrupt vector CAR registers (IMVxCTL, IMVxPCIECTL, IMVxLADDR,
    IMVxUADDR, &amp; IMVxDATA) and CAR_CQExPCICTL have already been programmed
    by the PCIe Manager based on information captured during PCIe enumeration.
    Refer to <xref href="../Device_Controller_Initialization_vhsg9zajw.xml#Device_Controller_Initialization_vhsg9zajw/Device_Enumeration_Initialization_xhsg9zajw"/>.
    Once the above setup has been completed, the CAR_CQExCTL.EN can be
    enabled. For non-SR-IOV, all the completion queues belonging to the same
    Port will be programmed with the same information.</p>

    <p>For more information on the PCIe Manager, refer to
    <xref href="../Enable_NVMe_CC.EN_1__1rhsg9zakc.xml#Enable_NVMe_CC.EN_1__1rhsg9zakc/Create_Admin_Submission_Completion_Queue_1shsg9zakc"/>.</p>
  </body>
</topic>