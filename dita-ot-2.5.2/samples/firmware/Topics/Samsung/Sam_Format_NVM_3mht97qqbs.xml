<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA 1.2 Topic//EN" "/SysSchema/dita/dtd/technicalContent/dtd/topic.dtd">
<topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" base="Princeton" id="Format_NVM_3mht97qqbs" xml:lang="en-US">
  <title>Format NVM</title>

  <body>
    <p>The Format NVM command is used to low-level format
    the NVM media. This is used when the host wants to change the LBA size
    and/or metadata size. A low-level format may destroy all data and metadata
    associated with all namespaces or only the specific namespace associated
    with the command.</p>

    <p>As part of the Format NVM command, the host may
    request a secure erase of the contents of the NVM. There are two types of
    secure erase. The User Data Erase erases all user content present in the
    NVM subsystem. The Cryptographic Erase erases all user content present in
    the NVM subsystem by deleting the encryption key with which the user data
    was previously encrypted. The secure erase functionality may apply to all
    namespaces or may be specific to a particular namespace. Refer to the
    <draft-comment author="hookerje" time="Fri 08/08/2014 12:19 PM" translate="no"> Added this comment to
    replace the placeholder XREF put here by Craig. Craig, if you right-click
    and insert a reviewer comment instead, a few good things happen. First,
    you don't crash publishing. Second, the fact that there is a draft-comment
    in the topic is visible from XDocs Explorer, so you can backtrack more
    easily to fill out bits that weren't in place when you were authoring for
    the first time, and last, you can add a show_comments element to the
    pmc_iso element in the bookmap to publish these comments right in the PDF,
    which makes life easier for reviewers. Pretty cool, eh?</draft-comment>
    Identify Controller data structure.</p>

    <p>The Format NVM command will fail if the controller
    is in an invalid security state. See the **add XREF** TCG SIIS
    reference.</p>

    <p>The settings specified in the Format NVM command are
    reported as part of the Identify Namespace data structure.</p>

    <p>If the controller supports multiple namespaces, then
    the host may specify the value of FFFFFFFFh for the namespace in order to
    apply the format operation to all namespaces regardless of the value of
    the Format NVM Attribute field in the Identify Controller data
    structure.</p>

    <section id="Normal_3nht97qqbs"><title>Normal</title> <fig id="Format_NVM_Normal_Command_Control_Flow_3oht97qqbs">
        <title>Format NVM (Normal) Command Control
        Flow</title>

        <image href="Graphics/Admin Command Manager/NVM_Format.svg" placement="break" width="5.5in"/>
      </fig> <table id="_3pht97qqbt">
        <title>Format NVM (Normal) Command Control
        Flow</title>

        <tgroup cols="3">
          <colspec colname="c1" colwidth="5*"/>

          <colspec colname="c2" colwidth="14*"/>

          <colspec colname="c3" colwidth="81*"/>

          <thead>
            <row>
              <entry>No.</entry>

              <entry>Message</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry><p> <b otherprops="bold">1</b> </p></entry>

              <entry><p> <b otherprops="bold">CmdReady64</b>
              </p></entry>

              <entry><p>The command
              is received by one of the Data Managers.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">2</b> </p></entry>

              <entry><p> <b otherprops="bold">CmdReady</b>
              </p></entry>

              <entry><p>The Data
              Manager forwards the command to the Admin Command Manager for
              processing.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">3</b> </p></entry>

              <entry><p> <b otherprops="bold">WriteLockReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager sends a write lock request for the LBA range for
              the specified namespace ID.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">4</b> </p></entry>

              <entry><p> <b otherprops="bold">LockCpl</b>
              </p></entry>

              <entry><p>The Locking
              Manager responds with a lock completion message when the lock is
              granted.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Admin
              Command Manager updates the namespace configuration data in both
              local memory and superblock.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">5</b> </p></entry>

              <entry><p> <b otherprops="bold">FormatReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a format requests to Mapping Manager
              0.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The L2P
              lookup table for the specified namespace ID is
              initialized.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">6</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>The updated
              L2P lookup table is written to flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">7</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>The Flash
              Interface responds with flash operation completion
              messages.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">8</b> </p></entry>

              <entry><p> <b otherprops="bold">FormatCpl</b>
              </p></entry>

              <entry><p>The Mapping
              Manager responds with a format completion message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Admin
              Command Manager updates the identify namespace data in both
              local memory and controller memory.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">9</b> </p></entry>

              <entry><p> <b otherprops="bold">PMWriteReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a request to Mapping Manager 0 to save
              the identify namespace information for the namespace being
              formatted.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">10</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>A FlashWrite
              is issued to store the namespace information to
              flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">11</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>When the
              flash write operation completes the Flash Interface responds
              with a FlashOpCpl message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">12</b> </p></entry>

              <entry><p> <b otherprops="bold">PMOpCpl</b>
              </p></entry>

              <entry><p>Mapping
              Manager 0 responds to the <b otherprops="bold">PMWriteReq</b> message with a <b otherprops="bold">PMOpCpl</b>
              message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Admin
              Command Manager delete LBA range type data in controller
              memory.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">13</b> </p></entry>

              <entry><p> <b otherprops="bold">PMWriteReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a request to Mapping Manager 0 to save
              the LBA range type information for the namespace being
              formatted.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">14</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>A FlashWrite
              is issued to store the LBA range type information to
              flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">15</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>When the
              flash write operation completes the Flash Interface responds
              with a FlashOpCpl message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">16</b> </p></entry>

              <entry><p> <b otherprops="bold">PMOpCpl</b>
              </p></entry>

              <entry><p>The Mapping
              Manager 0 responds to the <b otherprops="bold">PMWriteReq</b> message with a <b otherprops="bold">PMOpCpl</b>
              message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">17</b> </p></entry>

              <entry><p> <b otherprops="bold">WriteSuperBlkReq</b> </p></entry>

              <entry><p>The Admin
              Command Manager issues a request to the Control Manager to save
              superblock information.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Control
              Manager writes superblock information to flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">18</b> </p></entry>

              <entry><p> <b otherprops="bold">WriteSuperBlkCpl</b> </p></entry>

              <entry><p>The Control
              Manager response to the <b otherprops="bold">WriteSuperBlkReq </b>message with a <b otherprops="bold">WriteSuperBlkCpl
              </b>message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">19</b> </p></entry>

              <entry><p> <b otherprops="bold">PMReadyReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues protocol metadata ready messages to all
              Data Managers.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Data
              Managers re-read the namespace information from controller
              memory.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">20</b> </p></entry>

              <entry><p> <b otherprops="bold">PMReadyCpl</b>
              </p></entry>

              <entry><p>The Data
              Managers respond to the Admin Command Manager with protocol
              metadata ready completion messages.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">21</b> </p></entry>

              <entry><p> <b otherprops="bold">LockRelease</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager releases the LBA write lock.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">22</b> </p></entry>

              <entry><p> <b otherprops="bold">CplQueueUpdate</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager sends a completion queue update request to the
              Completion Manager.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">23</b> </p></entry>

              <entry><p> <b otherprops="bold">CplQueueUpdateCpl</b> </p></entry>

              <entry><p>The
              Completion Manager replies back to the Admin Command Manager
              when the completion has been successfully sent to the
              host.</p></entry>
            </row>
          </tbody>
        </tgroup>
      </table></section>

    <section id="Secure_Erase_User_Data__3qht97qqbt"><title>Secure Erase (User Data)</title> <fig id="Format_NVM_Secure_Erase_User_Data_Comman_3rht97qqbt">
        <title>Format NVM Secure Erase (User Data)
        Command Control Flow</title>

        <image href="Graphics/Admin Command Manager/NVM_Format_User_Data.svg" placement="break" width="5.5in"/>
      </fig> <table id="_3sht97qqbt">
        <title>Format NVM Secure Erase (User Data)
        Command Control Flow</title>

        <tgroup cols="3">
          <colspec colname="c1" colwidth="6*"/>

          <colspec colname="c2" colwidth="14*"/>

          <colspec colname="c3" colwidth="80*"/>

          <thead>
            <row>
              <entry>No.</entry>

              <entry>Message</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry><p> <b otherprops="bold">1</b> </p></entry>

              <entry><p> <b otherprops="bold">CmdReady64</b>
              </p></entry>

              <entry><p>The command
              is received by one of the Data Managers.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">2</b> </p></entry>

              <entry><p> <b otherprops="bold">CmdReady</b>
              </p></entry>

              <entry><p>The Data
              Manager forwards the command to the Admin Command Manager for
              processing.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">3</b> </p></entry>

              <entry><p> <b otherprops="bold">WriteLockReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager sends a write lock request for the LBA range for
              the specified namespace ID.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">4</b> </p></entry>

              <entry><p> <b otherprops="bold">LockCpl</b>
              </p></entry>

              <entry><p>The Locking
              Manager responds with a lock completion message when the lock is
              granted.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">5</b> </p></entry>

              <entry><p> <b otherprops="bold">FormatReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a format requests to Mapping Manager
              0.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">6</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashErase</b>
              </p></entry>

              <entry><p>Multiple
              flash erases are issued to the flash interface to erase the
              flash pages that contain data in the specified
              namespace.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">7</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>The Flash
              Interface responds with flash operation completion
              messages.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The L2P
              lookup table for the specified namespace ID is
              initialized.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">8</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>The updated
              L2P lookup table is written to flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">9</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>The Flash
              Interface responds with flash operation completion
              messages.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">10</b> </p></entry>

              <entry><p> <b otherprops="bold">FormatCpl</b>
              </p></entry>

              <entry><p>The Mapping
              Manager responds with a format completion message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Admin
              Command Manager updates the namespace configuration data in both
              local memory and superblock.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Admin
              Command Manager updates the identify namespace data in both
              local memory and controller memory.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">11</b> </p></entry>

              <entry><p> <b otherprops="bold">PMWriteReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a request to Mapping Manager 0 to save
              the identify namespace information for the namespace being
              formatted.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">12</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>A FlashWrite
              is issued to store the namespace information to
              flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">13</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>When the
              flash write operation completes the Flash Interface responds
              with a FlashOpCpl message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">14</b> </p></entry>

              <entry><p> <b otherprops="bold">PMOpCpl</b>
              </p></entry>

              <entry><p>Mapping
              Manager 0 responds to the <b otherprops="bold">PMWriteReq</b> message with a <b otherprops="bold">PMOpCpl</b>
              message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Admin
              Command Manager deletes LBA range type data in controller
              memory.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">15</b> </p></entry>

              <entry><p> <b otherprops="bold">PMWriteReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a request to Mapping Manager 0 to save
              the LBA range type information for the namespace being
              formatted.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">16</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>A FlashWrite
              is issued to store the LBA range type information to
              flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">17</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>When the
              flash write operation completes the Flash Interface responds
              with a FlashOpCpl message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">18</b> </p></entry>

              <entry><p> <b otherprops="bold">PMOpCpl</b>
              </p></entry>

              <entry><p>The Mapping
              Manager 0 responds to the <b otherprops="bold">PMWriteReq</b> message with a <b otherprops="bold">PMOpCpl</b>
              message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">19</b> </p></entry>

              <entry><p> <b otherprops="bold">WriteSuperBlkReq</b> </p></entry>

              <entry><p>The Admin
              Command Manager issues a request to the Control Manager to save
              superblock information.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Control
              Manager writes superblock information to flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">20</b> </p></entry>

              <entry><p> <b otherprops="bold">WriteSuperBlkCpl</b> </p></entry>

              <entry><p>The Control
              Manager response to the <b otherprops="bold">WriteSuperBlkReq </b>message with a <b otherprops="bold">WriteSuperBlkCpl
              </b>message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">21</b> </p></entry>

              <entry><p> <b otherprops="bold">PMReadyReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues protocol metadata ready messages to all
              Data Managers.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Data
              Managers re-read the namespace information from controller
              memory.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">22</b> </p></entry>

              <entry><p> <b otherprops="bold">PMReadyCpl</b>
              </p></entry>

              <entry><p>The Data
              Managers respond to the Admin Command Manager with protocol
              metadata ready completion messages.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">23</b> </p></entry>

              <entry><p> <b otherprops="bold">LockRelease</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager releases the LBA write lock.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">24</b> </p></entry>

              <entry><p> <b otherprops="bold">CplQueueUpdate</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager sends a completion queue update request to the
              Completion Manager.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">25</b> </p></entry>

              <entry><p> <b otherprops="bold">CplQueueUpdateCpl</b> </p></entry>

              <entry><p>The
              Completion Manager replies back to the Admin Command Manager
              when the completion has been successfully sent to the
              host.</p></entry>
            </row>
          </tbody>
        </tgroup>
      </table></section>

    <section id="Secure_Erase_Cryptographic__3tht97qqbt"><title>Secure Erase (Cryptographic)</title> <fig id="Format_NVM_Secure_Erase_Cryptographic_Co_3uht97qqbt">
        <title>Format NVM Secure Erase (Cryptographic)
        Command Control Flow</title>

        <image href="Graphics/Admin Command Manager/NVM_Format_Crypto.svg" placement="break" width="5.5in"/>
      </fig> <table id="_3vht97qqbt">
        <title>Format NVM Secure Erase (Cryptographic)
        Command Control Flow</title>

        <tgroup cols="3">
          <colspec colname="c1" colwidth="5*"/>

          <colspec colname="c2" colwidth="15*"/>

          <colspec colname="c3" colwidth="80*"/>

          <thead>
            <row>
              <entry>No.</entry>

              <entry>Message</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry><p> <b otherprops="bold">1</b> </p></entry>

              <entry><p> <b otherprops="bold">CmdReady64</b>
              </p></entry>

              <entry><p>The command
              is received by one of the Data Managers.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">2</b> </p></entry>

              <entry><p> <b otherprops="bold">CmdReady</b>
              </p></entry>

              <entry><p>The Data
              Manager forwards the command to the Admin Command Manager for
              processing.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">3</b> </p></entry>

              <entry><p> <b otherprops="bold">WriteLockReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager sends a write lock request for the LBA range for
              the specified namespace ID.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">4</b> </p></entry>

              <entry><p> <b otherprops="bold">LockCpl</b>
              </p></entry>

              <entry><p>The Locking
              Manager responds with a lock completion message when the lock is
              granted.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">5</b> </p></entry>

              <entry><p> <b otherprops="bold">FormatReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a format request to Mapping Manager
              0.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The L2P
              lookup table for the specified namespace ID is
              initialized.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">6</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>The updated
              L2P lookup table is written to flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">7</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>The Flash
              Interface responds with flash operation completion
              messages.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">8</b> </p></entry>

              <entry><p> <b otherprops="bold">FormatCpl</b>
              </p></entry>

              <entry><p>The Mapping
              Manager responds with a format completion message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">9</b> </p></entry>

              <entry><p> <b otherprops="bold">PMWriteReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a protocol metadata write request to
              Mapping Manager 0 to erase the encryption key.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">10</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>Flash write
              requests are issued to the Flash Interface to erase the
              encryption key.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">11</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>The Flash
              Interface responds with flash operation complete.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">12</b> </p></entry>

              <entry><p> <b otherprops="bold">PMOpCpl</b>
              </p></entry>

              <entry><p>Mapping
              Manager 0 issues a protocol metadata completion message to the
              Admin Command Manager.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Admin
              Command Manager updates the namespace configuration data in both
              local memory and superblock.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Admin
              Command Manager updates the identify namespace data in both
              local memory and controller memory.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">13</b> </p></entry>

              <entry><p> <b otherprops="bold">PMWriteReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a request to Mapping Manager 0 to save
              the identify namespace information for the namespace being
              formatted.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">14</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>A FlashWrite
              is issued to store the namespace information to
              flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">15</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>When the
              flash write operation completes the Flash Interface responds
              with a FlashOpCpl message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">16</b> </p></entry>

              <entry><p> <b otherprops="bold">PMOpCpl</b>
              </p></entry>

              <entry><p>Mapping
              Manager 0 responds to the <b otherprops="bold">PMWriteReq</b> message with a <b otherprops="bold">PMOpCpl</b>
              message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Admin
              Command Manager delete LBA range type data in controller
              memory.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">17</b> </p></entry>

              <entry><p> <b otherprops="bold">PMWriteReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues a request to Mapping Manager 0 to save
              the LBA range type information for the namespace being
              formatted.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">18</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashWrite</b>
              </p></entry>

              <entry><p>A FlashWrite
              is issued to store the LBA range type information to
              flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">19</b> </p></entry>

              <entry><p> <b otherprops="bold">FlashOpCpl</b>
              </p></entry>

              <entry><p>When the
              flash write operation completes the Flash Interface responds
              with a FlashOpCpl message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">20</b> </p></entry>

              <entry><p> <b otherprops="bold">PMOpCpl</b>
              </p></entry>

              <entry><p>The Mapping
              Manager 0 responds to the <b otherprops="bold">PMWriteReq</b> message with a <b otherprops="bold">PMOpCpl</b>
              message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">21</b> </p></entry>

              <entry><p> <b otherprops="bold">WriteSuperBlkReq</b> </p></entry>

              <entry><p>The Admin
              Command Manager issues a request to the Control Manager to save
              superblock information.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Control
              Manager writes superblock information to flash.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">22</b> </p></entry>

              <entry><p> <b otherprops="bold">WriteSuperBlkCpl</b> </p></entry>

              <entry><p>The Control
              Manager response to the <b otherprops="bold">WriteSuperBlkReq </b>message with a <b otherprops="bold">WriteSuperBlkCpl
              </b>message.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">23</b> </p></entry>

              <entry><p> <b otherprops="bold">PMReadyReq</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager issues protocol metadata ready messages to all
              Data Managers.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p> <b otherprops="bold">-</b> </p></entry>

              <entry><p>The Data
              Managers re-read the namespace information from controller
              memory.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">24</b> </p></entry>

              <entry><p> <b otherprops="bold">PMReadyCpl</b>
              </p></entry>

              <entry><p>The Data
              Managers respond to the Admin Command Manager with protocol
              metadata ready completion messages.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">25</b> </p></entry>

              <entry><p> <b otherprops="bold">LockRelease</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager releases the LBA write lock.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">26</b> </p></entry>

              <entry><p> <b otherprops="bold">CplQueueUpdate</b>
              </p></entry>

              <entry><p>The Admin
              Command Manager sends a completion queue update request to the
              Completion Manager.</p></entry>
            </row>

            <row>
              <entry><p> <b otherprops="bold">27</b> </p></entry>

              <entry><p> <b otherprops="bold">CplQueueUpdateCpl</b> </p></entry>

              <entry><p>The
              Completion Manager replies back to the Admin Command Manager
              when the completion has been successfully sent to the
              host.</p></entry>
            </row>
          </tbody>
        </tgroup>
      </table></section>
  </body>
</topic>