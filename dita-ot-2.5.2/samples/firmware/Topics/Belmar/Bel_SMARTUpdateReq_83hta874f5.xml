<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA 1.2 Topic//EN" "/SysSchema/dita/dtd/technicalContent/dtd/topic.dtd">
<topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" base="Princeton" id="SMARTUpdateReq_83hta874f5" xml:lang="en-US">
  <title>SMARTUpdateReq</title>

  <body>
    <p>The SMART Update request is used to provide NVMe
    controller SMART and general health information.</p>

    <fig id="Smart_Update_Request_Control_Flow_84hta874f5">
      <title>Smart Update Request Control Flow</title>

      <image href="../../Graphics/Lookup_Mgr/smartUpdateAdminCommand.svg" placement="break" width="5.5in"/>
    </fig>

    <table id="_85hta874f5">
      <title>Smart Update Request Control Flow</title>

      <tgroup cols="3">
        <colspec colname="c1" colwidth="5*"/>

        <colspec colname="c2" colwidth="23*"/>

        <colspec colname="c3" colwidth="72*"/>

        <thead>
          <row>
            <entry>No.</entry>

            <entry>Message</entry>

            <entry>Description</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><p> <b otherprops="bold">1</b> </p></entry>

            <entry><p> <b otherprops="bold">CmdReady64</b>
            </p></entry>

            <entry><p>The command is
            received by one of the Data Managers.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">2</b> </p></entry>

            <entry><p> <b otherprops="bold">CmdReady</b>
            </p></entry>

            <entry><p>The Data
            Manager forwards the command to the Admin Command Manager for
            processing.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">-</b> </p></entry>

            <entry/>

            <entry><p>The Admin
            Manager loads Smart information from controller memory to local
            SRAM.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">3</b> </p></entry>

            <entry><p> <b otherprops="bold">SMARTUpdateReq</b>
            </p></entry>

            <entry><p>The Admin
            Command Manager issues requests to each of the Data Managers to
            obtain their SMART health information.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">4</b> </p></entry>

            <entry><p> <b otherprops="bold">DMSMARTUpdateCpl</b>
            </p></entry>

            <entry><p>The Data
            Managers respond with a SMART update completion message that
            contains the requested information.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">5</b> </p></entry>

            <entry><p> <b otherprops="bold">SMARTUpdateReq</b>
            </p></entry>

            <entry><p>The Admin
            Command Manager issues a SMART update request to the Lookup
            Manager 0.</p></entry>
          </row>

          <row>
            <entry/>

            <entry/>

            <entry><p>The Lookup
            Manager 0 gets SMART update data from the second Lookup Manager
            1</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">6</b> </p></entry>

            <entry><p> <b otherprops="bold">SMARTUpdateReq</b>
            </p></entry>

            <entry><p>The Lookup
            Manager 0 issues a SMART update to the Wearleveling Managers to
            get smart/Health information.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">7</b> </p></entry>

            <entry><p> <b otherprops="bold">FMSMARTUpdateCpl</b>
            </p></entry>

            <entry><p>The
            Wearleveling Manager responds to the Lookup Manager 0 with a
            message that contains the requested information</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">8</b> </p></entry>

            <entry><p> <b otherprops="bold">FMSMARTUpdateCpl</b>
            </p></entry>

            <entry><p>The Lookup
            Manager 0 responds to the Admin Command Manager with a message
            that contains the requested information.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">-</b> </p></entry>

            <entry><p> <b otherprops="bold">-</b> </p></entry>

            <entry><p>The Admin
            Command Manager consolidates the SMART health information into a
            single location in controller memory.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">9</b> </p></entry>

            <entry><p> <b otherprops="bold">ConfigDataWriteReq</b> </p></entry>

            <entry><p>The Admin
            Command Manager issues a request to write the Data Frame buffer
            that contains the SMART health information to flas.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">10</b> </p></entry>

            <entry><p> <b otherprops="bold">FlashWrite</b>
            </p></entry>

            <entry><p>A write
            operation is issued to the Flash Interface to save the SMART
            health information.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">11</b> </p></entry>

            <entry><p> <b otherprops="bold">FlashOpCpl</b>
            </p></entry>

            <entry><p>The Flash
            Interface responds to the flash write request.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">12</b> </p></entry>

            <entry><p> <b otherprops="bold">ConfigDataOpCpl</b>
            </p></entry>

            <entry><p>The Lookup
            Manager responds to the <b otherprops="bold">ConfigDataWriteReq</b> message with a <b otherprops="bold">ConfigDataOpCpl</b>
            message.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">-</b> </p></entry>

            <entry><p> <b otherprops="bold">-</b> </p></entry>

            <entry><p>The Admin
            Manager checks whether there is any outstanding Asynchronous Event
            request for SMART information. If yes, the Admin Manager clears
            the request and issues Asynchronous Event completion to the
            host.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">13</b> </p></entry>

            <entry><p> <b otherprops="bold">EgressDMA</b>
            </p></entry>

            <entry><p>The Admin
            Command Manager issues DMA requests to transfer the SMART health
            information to host memory.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">14</b> </p></entry>

            <entry><p> <b otherprops="bold">DMACpl</b>
            </p></entry>

            <entry><p>The DMA
            responds to the Admin Command Manager when the transfer is
            complete.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">15</b> </p></entry>

            <entry><p> <b otherprops="bold">CplQueueUpdate</b>
            </p></entry>

            <entry><p>The Admin
            Command Manager sends a completion queue update request to the
            Completion Manager.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">16</b> </p></entry>

            <entry><p> <b otherprops="bold">CplQueueUpdateCpl</b>
            </p></entry>

            <entry><p>The Completion
            Manager replies back to the Admin Command Manager when the
            completion has been successfully sent to the host.</p></entry>
          </row>
        </tbody>
      </tgroup>
    </table>
  </body>
</topic>