<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA 1.2 Topic//EN" "/SysSchema/dita/dtd/technicalContent/dtd/topic.dtd">
<topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" base="Princeton" id="Bel_Recovery_Manager_Control_Flows" xml:lang="en-US">
  <title>Belmar Recovery Manager Control Flows</title>

  <body>
    <p>This section describes the control flow for the read
    error retry request.</p>

    <fig id="Recovery_Manager_Control_Flows">
      <title>Read error retry control flow</title>

      <image href="Graphics/Recovery_Manager_Control_Flows3.svg" placement="break" width="5.5in"/>
    </fig>

    <table id="_kqht7esfh2">
      <title>Read error retry control flow</title>

      <tgroup cols="3">
        <colspec colname="c1" colwidth="5*"/>

        <colspec colname="c2" colwidth="23*"/>

        <colspec colname="c3" colwidth="72*"/>

        <thead>
          <row>
            <entry>No.</entry>

            <entry>Message</entry>

            <entry>Description</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><p> <b otherprops="bold">1</b> </p></entry>

            <entry><b otherprops="bold">readRetryReq</b></entry>

            <entry><p>When ECC read
            error is detected at the Lookup Manager or Wearlevelling Manager,
            <b otherprops="bold">readRetryReq
            </b>is issued to the Recovery Manager with the information of ECC
            chunk with uncorrectable ECC error.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">2</b> </p></entry>

            <entry><p> <b otherprops="bold">getRawBuffer</b></p></entry>

            <entry><p>The Recovery
            Manager issues buffer request to the Buffer Manager to get raw
            buffer line address, </p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">3</b></p></entry>

            <entry><p> <b otherprops="bold">buffOpCpl</b></p></entry>

            <entry><p>Buffer Manager
            responds with buffer request messages.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">4</b></p></entry>

            <entry><p> <b otherprops="bold">flashReadReq</b>
            </p></entry>

            <entry><p>The Recovery
            Manager issues flash read request to the Flash Interface to get
            ECC chunk data, </p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">5</b></p></entry>

            <entry><p> <b otherprops="bold">flashOpCpl</b>
            </p></entry>

            <entry><p>Flash
            interface responds with flashOpCpl messages. </p><p>If there is still uncorrectable ECC error,
            process 2~5 will be repeated until we get FLASH_OP_CPL_OK or reach
            the MAX_RETRY number.</p></entry>
          </row>

          <row>
            <entry><p> <b otherprops="bold">6</b></p></entry>

            <entry><p> <b otherprops="bold">readRetryCpl</b>
            </p></entry>

            <entry><p>The Recovery
            Manager sends a ReadRetryCpl<b otherprops="bold"> </b>message in response to the
            ReadRetryReq.</p></entry>
          </row>
        </tbody>
      </tgroup>
    </table>
  </body>
</topic>